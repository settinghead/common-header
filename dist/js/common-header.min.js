!function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("auth-buttons-menu.html",'<li class="dropdown-header dropdown-title">\n  <span class="user-full-name">{{profile.firstName}} {{profile.lastName}}</span>\n</li>\n<li class="dropdown-header">\n  {{profile.email}}\n</li>\n<li class="divider" ng-show="isRiseVisionUser"></li>\n<li ng-show="isRiseVisionUser">\n  <a href="" ng-click="userSettings()" class="user-settings-button action">\n    <i class="fa fa-cogs"></i>\n    <span class="item-name">User Settings</span>\n  </a>\n</li>\n<li class="divider" ng-show="isRiseVisionUser"></li>\n<li class="divider" ng-show="false"></li>\n<li ng-show="false">\n  <a href="" class="action" ng-click="paymentMethods()">\n    <i class="fa fa-usd"></i>\n    <span class="item-name">Payment Methods</span>\n  </a>\n</li>\n<li ng-show="isLoggedIn">\n  <a href="" ng-click="logout()" class="sign-out-button action">\n    <i class="fa fa-sign-out"></i>\n    <span class="item-name">Sign Out</span>\n  </a>\n</li>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("auth-buttons.html",'<!-- Desktop and tablet -->\n<li\n  ng-show="isLoggedIn && !isRiseVisionUser && !undetermined && !loading">\n  <button type="button" href="" ng-click="register()"\n    class="register-user-menu-button action top-auth-button">\n    Create Account\n  </a>\n</li>\n<li\n  class="dropdown user-profile-dropdown desktop-menu-item"\n  ng-class="{\'hidden-xs\': isLoggedIn}"\n  ng-show="isLoggedIn"\n  >\n    <a href="" class="dropdown-toggle">\n      <img ng-src="{{userPicture}}"\n        class="profile-pic" width="30" height="30" alt="User" />\n    </a>\n    <ul class="dropdown-menu">\n      <ng-include\n        src="\'auth-buttons-menu.html\'"\n        replace-include\n      ></ng-include>\n    </ul>\n</li>\n<!-- Mobile -->\n<li\n  ng-class="{\'visible-xs-inline-block\': isLoggedIn}"\n  ng-show="isLoggedIn"\n  class=" mobile-menu-item"\n  >\n    <a href="" class="dropdown-toggle" action-sheet="\'auth-buttons-menu.html\'">\n      <img ng-src="{{userPicture}}"\n        class="profile-pic" width="30" height="30" alt="User" />\n    </a>\n</li>\n<!-- If User NOT Authenticated -->\n<li ng-show="!undetermined && isLoggedIn === false">\n  <button type="button" class="sign-in top-auth-button" ng-click="login(\'registrationComplete\')">\n    Sign In <img src="//rise-vision.github.io/style-guide/img/avatar_2x.jpg">\n  </button>\n</li>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("authorization-modal.html",'<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()">\n  		<i class="fa fa-times"></i>\n  	</button>\n</div>\n<div class="modal-body authorization-modal"\n  rv-spinner="spinnerOptions"\n  rv-spinner-key="authenticate-button"\n  rv-spinner-start-active="0"\n>\n  <img src="//rise-vision.github.io/style-guide/img/avatar_2x.jpg" class="profile-img">\n  <p>Please authorize your Google Account to register with Rise Vision.</p>\n\n  <button type="button" class="btn btn-success btn-fixed-width btn-block authorize-button" ng-click="authenticate(true)">\n    Authorize <i class="fa fa-white fa-check icon-right"></i>\n  </button>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("close-frame-button.html",'<li class="close-frame">\n  <a href="" class="close-frame-button" ng-click="closeIFrame()">\n    <i class="fa fa-times"></i>\n  </a>\n</li>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("common-header.html",'<!-- Common Header Navbar -->\n<nav class="navbar navbar-default navbar-static-top"\n	ng-class="{\'double-margin\': isSubcompanySelected}" role="navigation">\n	<div class="container">\n\n		<div class="navbar-header" style="width: 100%;">\n			<a class="navbar-brand visible-md visible-lg"\n			  href="http://www.risevision.com/" target="_blank" ng-if="!inRVAFrame">\n				<img src="//s3.amazonaws.com/rise-common/images/logo-small.png" class="img-responsive logo-small" width="113" height="42" alt="Rise Vision">\n			</a>\n			<a class="navbar-brand hidden-md hidden-lg text-center"\n				href="" off-canvas-toggle>\n				<i class="fa fa-bars"></i>\n			</a>\n			<!-- If User Authenticated -->\n			<!-- Action Nav -->\n			<ul class="nav navbar-nav navbar-right actions-nav pull-right">\n				<!-- Notifications -->\n				<ng-include\n					replace-include\n					ng-if="!inRVAFrame"\n				  ng-controller="SystemMessagesButtonCtrl"\n					src="\'system-messages-button.html\'"\n				></ng-include>\n				<!-- Shopping Cart -->\n				<ng-include\n					replace-include\n					ng-controller="ShoppingCartButtonCtrl"\n					src="\'shoppingcart-button.html\'"\n				></ng-include>\n				<!-- Shopping Cart -->\n				<ng-include\n					replace-include\n					ng-if="inRVAFrame"\n					ng-controller="CloseFrameButtonCtrl"\n					src="\'close-frame-button.html\'"\n				></ng-include>\n				<!-- Current App -->\n				<li class="dropdown" ng-show="false">\n					<a href="" class="dropdown-toggle">\n						<i class="fa fa-th"></i>\n					</a>\n					<ul class="dropdown-menu company-menu">\n						<li class="dropdown-header dropdown-title">\n							Current App\n						</li>\n						<li class="dropdown-header">\n							<i class="fa fa-tags"></i> Store\n						</li>\n						<li class="divider"></li>\n						<li>\n							<div class="menu-box pull-left">\n								<a href="">\n									<i class="fa fa-photo"></i>\n									<span>Displays</span>\n								</a>\n							</div>\n							<div class="menu-box pull-right">\n								<a href="">\n									<i class="fa fa-photo"></i>\n									<span>Scheduler</span>\n								</a>\n							</div>\n						</li>\n						<li>\n							<div class="menu-box pull-left">\n								<a href="">\n									<i class="fa fa-photo"></i>\n									<span>Editor</span>\n								</a>\n							</div>\n							<div class="menu-box pull-right">\n								<a href="">\n									<i class="fa fa-photo"></i>\n									<span>Storage</span>\n								</a>\n							</div>\n						</li>\n						<li>\n							<div class="menu-box pull-left">\n								<a href="">\n									<i class="fa fa-photo"></i>\n									<span>Bulletin</span>\n								</a>\n							</div>\n							<div class="menu-box pull-right">\n								<a href="">\n									<i class="fa fa-photo"></i>\n									<span>Player</span>\n								</a>\n							</div>\n						</li>\n					</ul>\n				</li>\n				<!-- END Current App -->\n				<!-- Company Dropdown -->\n				<ng-include\n					replace-include\n				  ng-controller="CompanyButtonsCtrl"\n					src="\'company-buttons.html\'"\n				></ng-include>\n				<!-- Auth -->\n				<ng-include\n					replace-include\n					ng-if="!inRVAFrame"\n				  ng-controller="AuthButtonsCtr"\n					src="\'auth-buttons.html\'"\n				></ng-include>\n				<li ng-if="inRVAFrame"\n				  ng-controller="AuthButtonsCtr"></li>\n			</ul>\n			<!-- END Action Nav -->\n\n			<!-- Nav Links -->\n			<div class="navbar-collapse navbar-left hidden-xs hidden-sm">\n				<ul class="nav navbar-nav">\n					<li ng-repeat="opt in navOptions">\n						<a ng-href="{{opt.link}}" target="{{opt.target}}">{{opt.title}}</a>\n					</li>\n					<li ng-if="!inRVAFrame">\n						<a href="http://www.risevision.com/help/" target="_blank">\n							Help\n						</a>\n					</li>\n				</ul>\n			</div>\n			<!-- END Nav Links -->\n		</div>\n\n	</div>\n\n	<ng-include\n		replace-include\n		ng-controller="SubcompanyBannerCtrl"\n		src="\'subcompany-banner.html\'"></ng-include>\n</nav>\n\n<ng-include\n	replace-include\n	ng-controller="GlobalAlertsCtrl"\n	src="\'global-alerts.html\'"></ng-include>\n\n<!-- END Common Header Navbar -->\n\n<!-- Off Canvas Version of the Nav -->\n<nav class="off-canvas-nav" off-canvas-nav>\n  <ul class="nav nav-pills nav-stacked">\n  	<li off-canvas-toggle>\n  		<i class="fa fa-times fa-2x pull-right"></i>\n  		<img src="//s3.amazonaws.com/rise-common/images/logo-small.png" class="img-responsive logo-small" width="113" height="42" alt="Rise Vision">\n  	</li>\n    <li ng-repeat="opt in navOptions">\n			<a ng-href="{{opt.link}}" target="{{opt.target}}">{{opt.title}}</a>\n		</li>\n		<li>\n			<a target="_blank" href="http://www.risevision.com/help">Help</a>\n		</li>\n  </ul>\n</nav>\n<iframe name="logoutFrame" id="logoutFrame" style=\'display:none\'></iframe>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-buttons-menu.html",'<li class="dropdown-header dropdown-title"\n  ng-show="isRiseVisionUser">\n  Current Company\n</li>\n<li class="dropdown-header" ng-show="isRiseVisionUser">\n  <!-- home -->\n  <i ng-show="!isSubcompanySelected" class="fa fa-home"></i>\n  <!-- warning -->\n  <i ng-show="isSubcompanySelected" class="fa fa-warning glyphicon-danger"></i>\n  {{selectedCompanyName}}\n  <div ng-show="isSubcompanySelected" class="danger">This is a Sub-Company of your Company.</div>\n</li>\n<li ng-show="isSubcompanySelected" class="divider"></li>\n<li ng-show="isSubcompanySelected">\n  <a href="" ng-click="resetCompany()" class="action">\n    <i class="fa fa-home"></i>\n    <span class="item-name">Switch To My Company</span>\n  </a>\n</li>\n<li class="divider"></li>\n<li ng-show="isRiseVisionUser && !isSubcompanySelected">\n  <a href="" ng-click="switchCompany()" class="action select-subcompany-menu-button">\n    <i class="fa fa-share-square-o"></i>\n    <span class="item-name">Select Sub-Company</span>\n  </a>\n</li>\n<li ng-show="isUserAdmin || isRiseAdmin" class="divider"></li>\n<li ng-show="isUserAdmin || isRiseAdmin">\n  <a href="" ng-click="addSubCompany()" class="action add-subcompany-menu-button">\n    <i class="fa fa-plus"></i>\n    <span class="item-name">Add Sub-Company</span>\n  </a>\n</li>\n<li ng-show="isUserAdmin || isRiseAdmin" class="divider"></li>\n<li ng-show="isUserAdmin || isRiseAdmin">\n  <a href="" ng-click="companySettings()" class="action company-settings-menu-button">\n    <i class="fa fa-cog"></i>\n    <span class="item-name">Company Settings</span>\n  </a>\n</li>\n<li ng-show="isUserAdmin || isRiseAdmin" class="divider"></li>\n<li ng-show="isUserAdmin || isRiseAdmin">\n  <a href="" data-toggle="modal" ng-click="companyUsers()" class="action company-users-menu-button">\n    <i class="fa fa-users"></i>\n    <span class="item-name">Company Users</span>\n  </a>\n</li>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-buttons.html",'<!-- Desktop and tablet -->\n<li class="dropdown hidden-xs" ng-show="isRiseVisionUser && !inRVAFrame">\n  <a href="" class="dropdown-toggle company-buttons-icon">\n    <i class="fa fa-cog"></i>\n  </a>\n  <ul class="dropdown-menu">\n    <ng-include\n      replace-include\n      src="\'company-buttons-menu.html\'"\n    ></ng-include>\n  </ul>\n</li>\n\n<!-- Mobile -->\n<li\n ng-show="isRiseVisionUser && !inRVAFrame"\n ng-class="{\'visible-xs-inline-block\': isRiseVisionUser}">\n  <a href="" class="company-buttons-icon-mobile"\n    action-sheet="\'company-buttons-menu.html\'">\n    <i class="fa fa-cog"></i>\n  </a>\n</li>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-fields.html",'<div class="form-group" ng-class="{\'has-error\': forms.companyForm.name.$invalid && !forms.companyForm.name.$pristine}">\n  <label for="company-settings-name">\n    Name *\n  </label>\n  <input required id="company-settings-name" type="text" class="form-control"\n    ng-model="company.name" name="name" />\n  <p ng-show="forms.companyForm.name.$invalid && !forms.companyForm.name.$pristine"\n    class="help-block validation-error-message-name">Company name is required.</p>\n</div>\n<div class="form-group">\n  <label for="company-settings-street">\n    Street\n  </label>\n  <input id="company-settings-street" type="text" class="form-control" ng-model="company.street" />\n</div>\n<div class="form-group">\n  <label for="company-settings-unit">\n    Unit\n  </label>\n  <input id="company-settings-unit" type="text" class="form-control" ng-model="company.unit" />\n</div>\n<div class="form-group">\n  <label for="company-settings-city">\n    City\n  </label>\n  <input id="company-settings-city" type="text" class="form-control" ng-model="company.city" />\n</div>\n<div class="form-group">\n  <label for="company-settings-country">\n    Country\n  </label>\n  <select id="company-settings-country" class="form-control selectpicker"\n    ng-model="company.country" ng-options="c[1] as c[0] for c in countries">\n    <option value="">&lt; Select Country &gt;</option>\n  </select>\n</div>\n<div class="form-group">\n  <label for="company-settings-state">\n    State / Province\n  </label>\n  <input id="company-settings-state" type="text" class="form-control" ng-model="company.province" ng-hide="company.country == \'US\' || company.country == \'CA\'" />\n  <select class="form-control selectpicker" ng-model="company.province" ng-options="c[1] as c[0] for c in regionsCA" ng-show="company.country == \'CA\'">\n    <option value="">&lt; Select Province &gt;</option>\n  </select>\n  <select class="form-control selectpicker" ng-model="company.province" ng-options="c[1] as c[0] for c in regionsUS" ng-show="company.country == \'US\'">\n    <option value="">&lt; Select State &gt;</option>\n  </select>\n</div>\n<div class="form-group">\n  <label for="company-settings-zip">\n    Zip / Postal Code\n  </label>\n  <input id="company-settings-zip" type="text" class="form-control" ng-model="company.postalCode" />\n</div>\n<div class="form-group">\n  <label for="company-settings-phone">\n    Phone\n  </label>\n  <input id="company-settings-phone" type="tel" class="form-control" ng-model="company.telephone"/>\n</div>\n<div class="form-group">\n  <label for="company-settings-monitoring">\n    Send Monitoring Emails To\n  </label>\n  <input id="company-settings-monitoring"\n    type="text" class="form-control" ng-list=", "\n     ng-model="company.notificationEmails" placeholder="e.g. john.doe@company.com, jane.doe@company.com"/>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-selector-modal.html",'\n<form role="form">\n	<div class="modal-header">\n		<button type="button" class="close" data-dismiss="modal"\n		  aria-hidden="true" ng-click="closeModal()">\n			<i class="fa fa-times"></i>\n		</button>\n		<h2 id="switch-company" class="modal-title">\n			Select Sub-Company\n		</h2>\n	</div>\n	<div class="modal-body jfk-scrollbar">\n	  <!-- Search -->\n		<div class="input-group company-search add-bottom">\n			<input id="csSearch" type="text" class="form-control"\n				placeholder="Search Companies"\n				ng-model="search.searchString"\n				ng-enter="doSearch()">\n		    <span class="input-group-addon primary-bg" ng-click="doSearch()">\n		      <i class="fa fa-search"></i>\n		    </span>\n		</div>\n		<!-- List of Companies -->\n		<div class="list-group scrollable-list"\n		  rv-scroll-event="handleScroll($event, isEndEvent)"\n		  rv-spinner rv-spinner-key="company-selector-modal-list"\n			rv-spinner-start-active="1"\n		>\n			<div class="list-group-item"  ng-repeat="company in companies.list" ng-click="setCompany(company)">\n				<p class="list-group-item-text"><strong>{{company.name}}</strong><br/><small class="text-muted">{{company | fullAddress}}</small>\n				</p>\n			</div>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button type="button" class="btn btn-primary" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">Cancel\n			<i class="fa fa-white fa-times icon-right"></i>\n		</button>\n	</div>\n</form>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-settings-modal.html",'<div rv-spinner\n  rv-spinner-key="company-settings-modal"\n  rv-spinner-start-active="1">\n\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="company-settings-label" class="modal-title">Company Settings</h2>\n</div>\n<div class="modal-body company-settings-modal">\n  <form role="form" name="forms.companyForm">\n    <div ng-include="\'company-fields.html\'"></div>\n    <div class="form-group">\n      <label>\n        Authentication Key\n      </label>\n      <a class="action-link" href="" ng-click="resetAuthKey()">Reset</a>\n      <div>\n        {{company.authKey}}\n      </div>\n    </div>\n    <div class="form-group">\n      <label>\n        Claim ID\n      </label>\n      <a class="action-link" href="" ng-click="resetClaimId()">Reset</a>\n      <div>\n        {{company.claimId}}\n      </div>\n    </div>\n    <div class="form-group" ng-hide="true">\n      <label>\n        Sub-Company Home Page Presentation\n      </label>\n      <a class="action-link" href="" ng-click="showSelector()">Select</a>\n      <a class="action-link" href="">Default</a>\n      <div id="presentation-name">Rise Vision Default (ID=a6789044-ae4a-48c7-b6fd-b5d4ffea2f24)</div>\n      <div class="presentation-selector" ng-show="isSelectorVisible">\n        <div class="panel panel-default">\n          <ul class="list-unstyled selector-header">\n            <li ng-class="{active : selected == \'list\'}">\n              <a href="" ng-click="showPresentationView($event, \'list\')">Search Presentations</a>\n            </li>\n            <li ng-class="{active : selected == \'search\'}">\n              <a href="" ng-click="showPresentationView($event, \'search\')">Enter Presentation ID</a>\n            </li>\n            <li class="close-button">\n              <button type="button" class="close" aria-hidden="true" ng-click="closeSelector()">\n                <i class="fa fa-times"></i>\n              </button>\n            </li>\n          </ul>\n          <div class="panel-body">\n            <div class="presentation-list" ng-show="selected == \'list\'">\n              <div class="input-group search">\n                <input type="text" class="form-control" placeholder="Search Presentations">\n                <span class="input-group-btn">\n                  <button class="btn btn-primary" type="submit">\n                    <i class="fa fa-search fa-white"></i>\n                  </button>\n                </span>\n              </div>\n              <div class="list-group scrollable-list">\n                <a href="" class="list-group-item" ng-click="setPresentation($event, \'Demo Presentation\')">\n                  Demo Presentation\n                </a>\n                <a href="" class="list-group-item" ng-click="setPresentation($event, \'My First Presentation\')">\n                  My First Presentation\n                </a>\n              </div>\n            </div>\n            <div class="presentation-search" ng-show="selected == \'search\'">\n              <form role="form">\n                <div class="form-group">\n                  <input id="presentation-id" type="text" class="form-control" placeholder="Enter Presentation ID" />\n                </div>\n                <div class="form-group">\n                  <a href="" ng-click="setPresentation($event)">Retrieve Presentation</a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="form-group" ng-hide="true">\n        <label for="company-settings-community-url">\n          Sub-Company Community URL\n        </label>\n        <a class="action-link" href="">Default</a>\n        <input id="company-settings-community-url" type="url" class="form-control" />\n      </div>\n      <div class="form-group" ng-hide="true">\n        <label for="company-settings-support-url">\n          Sub-Company Support URL\n        </label>\n        <a class="action-link" href="">Default</a>\n        <input id="company-settings-support-url" type="url" class="form-control" />\n      </div>\n      <div class="checkbox" ng-if="isRiseStoreAdmin">\n        <label>\n          <input type="checkbox" ng-model="company.isSeller" />\n          Registered Seller\n        </label>\n      </div>\n      <div class="form-group" ng-hide="true">\n        <label for="company-settings-status">\n          Status\n        </label>\n        <select id="company-settings-status" class="form-control selectpicker">\n          <option value="active">Active</option>\n          <option value="inactive">Inactive</option>\n        </select>\n      </div>\n    </form>\n  </div>\n  <div class="modal-footer">\n    <button type="button"\n      class="btn btn-success btn-fixed-width" ng-click="save()"\n      ng-disabled="forms.companyForm.$invalid">Save\n      <i class="fa fa-white fa-check icon-right"></i>\n    </button>\n    <button type="button" class="btn btn-danger btn-fixed-width delete-company-button"\n    ng-show="!isDeletingCompany" ng-click="deleteCompany()">\n      Delete <i class="fa fa-white fa-trash-o icon-right"></i>\n    </button>\n    <button type="button" class="btn btn-danger btn-confirm-delete" data-dismiss="modal" ng-show="isDeletingCompany" ng-click="closeModal()">\n      Confirm Deletion <i class="fa fa-white fa-warning icon-right"></i>\n    </button>\n    <button type="button"\n      class="btn btn-primary btn-fixed-width close-company-settings-button" data-dismiss="modal" ng-click="closeModal()">Cancel\n      <i class="fa fa-white fa-times icon-right"></i>\n    </button>\n  </div>\n</div>\n</div> <!--spinner -->\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-users-modal.html",'<div rv-spinner\n  rv-spinner-key="company-users-modal"\n  rv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal"\n    aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="company-users-label" class="modal-title">Company Users</h2>\n</div>\n<div class="modal-body company-users-modal">\n  <!-- CSV Button -->\n  <div class="row action-bar add-bottom" ng-if="false">\n    <button class="btn btn-secondary" ng-csv="users"\n      filename="users.csv">Download to CSV</button>\n  </div>\n  <!-- Search -->\n  <div class="input-group company-search add-bottom">\n    <input id="csSearch" type="text" class="form-control"\n      placeholder="Search Users"\n      ng-model="search.searchString"\n      ng-enter="doSearch()">\n      <span class="input-group-addon primary-bg" ng-click="doSearch()">\n        <i class="fa fa-search"></i>\n      </span>\n  </div>\n  <!-- List of Users -->\n  <div class="list-group scrollable-list company-users-list"\n    rv-spinner\n    rv-spinner-key="company-users-list"\n    rv-spinner-start-active="1">\n    <div class="list-group-item  company-users-list-item"\n      ng-repeat="user in users | orderBy:sort.field:sort.descending | filter:userSearchString" ng-click="editUser(user.username)">\n      <p class="list-group-item-text"><strong>{{user.firstName}} {{user.lastName}}</strong> <small class="text-muted">{{user.email}}</small></p>\n    </div>\n  </div>\n</div>\n<div class="modal-footer">\n  <button type="button" class="btn btn-success add-company-user-button"\n    ng-click="addUser()">Add User\n    <i class="fa fa-white fa-plus icon-right"></i>\n  </button>\n  <button type="button" class="btn btn-primary close-company-users-button"\n    data-dismiss="modal" ng-click="closeModal()">\n    Cancel <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n</div> <!-- spinner -->\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("credit-cards-modal.html",'<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="pay-now-label" class="modal-title">Credit Cards</h2>\n</div>\n<div class="modal-body" ng-scroll-event="handleScroll($event, isEndEvent)">\n  <form role="form">\n    <div class="form-group">\n      <label for="card-number">Card Number</label>\n      <input id="card-number" data-stripe="number" class="form-control" type="text" ng-model="card.number"/>\n    </div>\n    <div class="form-group">\n      <label for="card-name">Cardholder Name</label>\n      <input id="card-name" data-stripe="name" class="form-control" type="text" ng-model="card.name"/>\n    </div>\n    <div class="row form-group">\n      <div class="col-md-3">\n        <label for="expiry-month">Exp. Month</label>\n        <select id="expiry-month" data-stripe="exp-month" class="form-control selectpicker" ng-model="card.expMonth">\n          <option value="1">01</option>\n          <option value="2">02</option>\n          <option value="3">03</option>\n          <option value="4" selected>04</option>\n          <option value="5">05</option>\n          <option value="6">06</option>\n          <option value="7">07</option>\n          <option value="8">08</option>\n          <option value="9">09</option>\n          <option value="10">10</option>\n          <option value="11">11</option>\n          <option value="12">12</option>\n        </select>\n      </div>\n      <div class="col-md-3">\n        <label for="expiry-year">Exp. Year</label>\n        <select id="expiry-year" data-stripe="exp-year" class="form-control selectpicker" ng-model="card.expYear">\n          <option value="2014" selected>2014</option>\n          <option value="2015">2015</option>\n          <option value="2016">2016</option>\n          <option value="2017">2017</option>\n          <option value="2018">2018</option>\n          <option value="2019">2019</option>\n          <option value="2020">2020</option>\n          <option value="2021">2021</option>\n          <option value="2022">2022</option>\n          <option value="2023">2023</option>\n          <option value="2024">2024</option>\n        </select>\n      </div>\n      <div class="col-md-3">\n        <label for="cvc">Security Code</label>\n        <input id="cvc" data-stripe="cvc" class="form-control" type="text" size="4" ng-model="card.cvc">\n      </div>\n    </div>\n    <!-- Address -->\n    <h3>Billing Address</h3>\n    <div class="form-group">\n      <label for="street">Street</label>\n      <input id="street" type="text" class="form-control" ng-model="addr.address1" />\n    </div>\n    <div class="form-group">\n      <label for="unit">Street (Line 2)</label>\n      <input id="unit" type="text" class="form-control" ng-model="addr.address2" />\n    </div>\n    <div class="form-group">\n      <label for="city">City</label>\n      <input id="city" type="text" class="form-control" ng-model="addr.city" />\n    </div>\n    <div class="form-group">\n      <label for="country">Country</label>\n      <select id="country" class="form-control selectpicker" ng-model="addr.country" ng-options="c[1] as c[0] for c in countries">\n        <option value="">&lt; Select Country &gt;</option>\n      </select>\n    </div>\n    <div class="form-group">\n      <label for="province">State / Province</label>\n      <!-- <input id="province" type="text" class="form-control" ng-model="addr.province" ng-hide="addr.country == \'US\' || addr.country == \'CA\'" /> -->\n      <select class="form-control selectpicker" ng-model="addr.province" ng-options="c[1] as c[0] for c in regionsCA" ng-show="addr.country == \'CA\'">\n        <option value="">&lt; Select Province &gt;</option>\n      </select>\n      <!-- <select class="form-control selectpicker" ng-model="addr.province" ng-options="c[1] as c[0] for c in regionsUS" ng-show="addr.country == \'US\'">\n        <option value="">&lt; Select State &gt;</option>\n      </select> -->\n    </div>\n    <div class="form-group">\n      <label for="zip">Zip / Postal Code</label>\n      <input id="zip" type="text" class="form-control" ng-model="addr.postalCode" />\n    </div>\n    <!-- End Address-->\n    <div class="form-group danger" ng-show="isDeletingCard">\n      Warning! If you delete this credit card from your account all subscription renewals paid on this card will fail at the time of renewal resulting in potential loss of service. Please confirm you wish to proceed with deleting this card by typing "DELETE" into the box below and clicking on the Confirm Deletion button.\n      <div class="row">\n        <div class="col-sm-4">\n          <input type="text" class="form-control" />\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n<div class="modal-footer">\n  <div class="row">\n    <div class="col-sm-3">\n      <a href="https://stripe.com/" target="_blank">\n        <img src="img/powered-by-stripe.png" class="stripe" width="119" height="26" alt="Powered by Stripe">\n      </a>\n    </div>\n    <div class="col-sm-9">\n      <button type="button" class="btn btn-success btn-fixed-width" data-dismiss="modal" ng-click="closeModal()">Save\n        <i class="fa fa-white fa-check icon-right"></i>\n      </button>\n      <button type="button" class="btn btn-danger btn-fixed-width" ng-show="!isDeletingCard" ng-click="deleteCard()">\n        Delete <i class="fa fa-white fa-trash-o icon-right"></i>\n      </button>\n      <button type="button" class="btn btn-danger btn-confirm-delete" data-dismiss="modal" ng-show="isDeletingCard" ng-click="closeModal()">\n        Confirm Deletion <i class="fa fa-white fa-warning icon-right"></i>\n      </button>\n      <button type="button" class="btn btn-primary btn-fixed-width" data-dismiss="modal" ng-click="closeModal()">Cancel\n        <i class="fa fa-white fa-times icon-right"></i>\n      </button>\n    </div>\n  </div>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("global-alerts.html",'<div class="container">\n  <div class="row">\n    <div class="col-md-12">\n      <div class="alert alert-danger" role="alert" ng-repeat="msg in errors">\n        <span ng-bind-html="msg"></span>\n        <button type="button" class="close pull-right"\n          ng-click="dismiss(\'errors\', $index);">\n          <i class="fa fa-times"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("move-company-modal.html",'<div rv-spinner\n  rv-spinner-key="move-company-modal"\n  rv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="move-company-label" class="modal-title">Move Company</h2>\n</div>\n<div class="modal-body move-company-modal">\n  <form role="form">\n    <div class="form-group">\n      <label for="auth-key">\n        Enter the Authentication Key of the Company that you want to move.\n      </label>\n      <div class="row">\n        <div class="col-sm-6">\n          <input id="auth-key" type="text" class="form-control"\n          ng-model="company.authKey" />\n        </div>\n        <div class="col-sm-6">\n          <a href="" class="btn btn-secondary retrieve-company-details-button"\n          ng-disabled="!company.authKey"\n          ng-click="getCompany()">Retrieve Company Details</a>\n        </div>\n      </div>\n    </div>\n  </form>\n  <div ng-show="company.name" class="company-details-info">\n    <h3>Details of the Company You Want to Move</h3>\n    <div>\n      {{company.name}}<br>\n      {{company.address}}\n      {{company.city}}, {{company.province}}, {{company.country}} {{company.postalCode}}\n    </div>\n    <h3>Details of the Company You Are Moving the Above Company Under</h3>\n    <div class="to-company">\n      {{selectedCompany.name}}<br>\n      {{selectedCompany.address}}<br>\n      {{selectedCompany.city}}, {{selectedCompany.province}},\n      {{selectedCompany.country}} {{selectedCompany.postalCode}}\n    </div>\n  </div>\n  <div ng-show="errors.length > 0">\n    <div class="alert alert-danger" ng-repeat="error in errors">\n      {{error}}\n    </div>\n  </div>\n  <div ng-show="messages.length > 0">\n    <div class="alert alert-success" ng-repeat="message in messages">\n      {{message}}\n    </div>\n  </div>\n</div>\n<div class="modal-footer">\n  <button type="button"\n    class="btn btn-success move-company-button"\n    ng-show="company.name && !moveSuccess" ng-click="moveCompany()">Move Company\n    <i class="fa fa-white fa-check icon-right"></i>\n  </button>\n  <button type="button" class="btn btn-primary close-move-company-button" data-dismiss="modal" ng-click="closeModal()">\n    {{dismissButtonText}} <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n')
}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("payment-methods-modal.html",'<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="user-settings-label" class="modal-title">Payment Methods</h2>\n</div>\n<div class="modal-body">\n  <div class="container-fluid">\n    <div class="list-group">\n      <div class="row list-group-item">\n        <div class="col-sm-10">\n          Visa - 123\n          <span class="expiry">Expires - 02/15</span>\n        </div>\n        <div class="col-sm-2 edit">\n          <a href="" ng-click="creditCards()">\n            Edit\n          </a>\n        </div>\n      </div>\n      <div class="row list-group-item">\n        <div class="col-sm-10">\n          Amex - 123\n          <span class="expiry">Expires - 02/15</span>\n        </div>\n        <div class="col-sm-2 edit">\n          <a href="" ng-click="creditCards()">\n            Edit\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="modal-footer">\n  <div class="row">\n    <div class="col-sm-3 stripe">\n      <a href="https://stripe.com/" target="_blank">\n        <img src="img/powered-by-stripe.png" width="119" height="26" alt="Powered by Stripe">\n      </a>\n    </div>\n    <div class="col-sm-9">\n      <button type="button" class="btn btn-primary" ng-click="closeModal()">\n        Cancel <i class="fa fa-white fa-times icon-right"></i>\n      </button>\n    </div>\n  </div>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("registration-modal.html",'<div rv-spinner\nrv-spinner-key="registration-modal"\nrv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 class="modal-title">Welcome To Rise Vision</h2>\n</div>\n<div class="modal-body registration-modal">\n  <p>We require an email address that we can reliably reach you at\n  for system notices and other critical information. We promise,\n   only system notices, we won\'t send you anything else unless you\n  sign up for the newsletter below, and we won\'t share your email address\n  with anyone else.</p>\n\n  <form novalidate role="form" name="forms.registrationForm">\n    <div class="form-group" ng-class="{ \'has-error\' : forms.registrationForm.email.$invalid && !forms.registrationForm.email.$pristine }">\n      <label for="email">Email</label>\n      <input type="email" class="form-control email"\n      name="email"\n      id="email" required\n      ng-model="profile.email">\n      <p ng-show="forms.registrationForm.email.$invalid && !forms.registrationForm.email.$pristine"\n        class="help-block validation-error-message-email">Enter a valid email.</p>\n    </div>\n    <!-- Terms of Service and Privacy -->\n    <div class="checkbox form-group" ng-class="{ \'has-error\' : forms.registrationForm.accepted.$invalid && !userForm.accepted.$pristine }">\n      <label>\n      <input type="checkbox" name="accepted"\n        ng-model="profile.accepted"\n        class="accept-terms-checkbox" required />\n      I accept the terms of <a href="http://www.risevision.com/terms-service-privacy/" target="_blank">Service and Privacy</a>\n      <p ng-show="forms.registrationForm.accepted.$invalid && !forms.registrationForm.accepted.$pristine"\n        class="help-block validation-error-message-accepted">You must accept terms and condtions.</p>\n      </label>\n    </div>\n    <!-- Newsletter -->\n    <div class="checkbox form-group">\n      <label>\n        <input type="checkbox" class="sign-up-newsletter-checkbox" ng-model="profile.mailSyncEnabled"> Sign up for our newsletter\n      </label>\n    </div>\n    <div class="form-group">\n      <button ng-click="save()"\n        type="button"\n        class="btn btn-success btn-fixed-width registration-save-button"\n        ng-disabled="registering">\n        Save <i class="fa fa-white fa-check icon-right"></i>\n      </button>\n      <button type="button" class="btn btn-primary btn-fixed-width registration-cancel-button"\n      ng-disabled="registering"\n      ng-click="closeModal()">\n        Cancel <i class="fa fa-white fa-times icon-right"></i>\n      </button>\n    </div>\n  </form>\n</div>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("shoppingcart-button.html",'<li class="shopping-cart" ng-show="!hideShoppingCart && isRiseVisionUser">\n<a href="{{shoppingCartUrl}}" class="shopping-cart-button">\n  <i class="fa fa-shopping-cart"></i>\n  <span id="cartBadge" class="label label-primary" ng-show="cart.items.length">\n    {{cart.items.length | surpressZero}}</span>\n</a>\n</li>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("signout-modal.html",'<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()" aria-hidden="true">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="sign-out-label" class="modal-title">Sign Out</h2>\n</div>\n<div class="modal-body sign-out-modal">\n  <form role="form">\n    <p>\n      Signing out does not sign you out of your Google Account.\n    </p>\n    <p>\n      If you are on a shared computer you should sign out of your Google Account.\n    </p>\n    <p>\n      <button type="button" class="btn btn-default sign-out-rv-only-button" ng-click="signOut(false)">Sign Out\n        <i class="fa fa-sign-out fa-lg icon-right"></i>\n      </button>\n    </p>\n      <button type="button" class="btn btn-default sign-out-google-account" ng-click="signOut(true)">Sign Out of your Google Account\n        <i class="fa fa-google-plus-square fa-lg icon-right"></i>\n      </button>\n    <p>\n    </p>\n  </form>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("subcompany-banner.html",'<div ng-show="isSubcompanySelected && !inRVAFrame"\n  class="sub-company-alert">\n  You\'re in Sub-Company {{selectedCompanyName}}&nbsp;\n  <a href="#" ng-click="switchToMyCompany()">Switch to My Company</a>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("subcompany-modal.html",'<div rv-spinner\n  rv-spinner-key="add-subcompany-modal"\n  rv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()" aria-hidden="true">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="sub-company-label" class="modal-title">Add Sub-Company</h2>\n</div>\n<div class="modal-body select-subcompany-modal pt-add-subcompany-modal">\n  <form role="form" name="forms.companyForm">\n    <div ng-include="\'company-fields.html\'"></div>\n    <div class="form-group">\n      <a href="" data-dismiss="modal" data-toggle="modal" class="move-subcompany-button"\n        ng-click="moveCompany()">Move a Company Under Your Company</a>\n    </div>\n  </form>\n</div>\n<div class="modal-footer">\n  <button type="button"\n    class="btn btn-success btn-fixed-width add-subcompany-save-button"\n    ng-click="save()" ng-disabled="forms.companyForm.$invalid">Save\n    <i class="fa fa-white fa-check icon-right"></i>\n  </button>\n  <button type="button" class="btn btn-primary btn-fixed-width cancel-add-subcompany-button" ng-click="closeModal()">Cancel\n    <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("system-messages-button-menu.html",'<li class="dropdown-header dropdown-title system-message">\n  System Message\n</li>\n<li class="divider"></li>\n<li class="system-message"\n  ng-repeat="message in messages"\n  ng-bind-html="renderHtml(message.text)">\n</li>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("system-messages-button.html",'<!-- Desktop and tablet -->\n<li class="dropdown system-messages hidden-xs"\nng-show="isRiseVisionUser && messages.length > 0">\n  <a href="" class="dropdown-toggle system-messages-button">\n    <i class="fa fa-bell"></i>\n    <span class="label label-danger system-messages-badge">{{messages.length | surpressZero}}</span>\n  </a>\n  <ul class="dropdown-menu system-messages">\n    <ng-include\n      src="\'system-messages-button-menu.html\'"\n    ></ng-include>\n  </ul>\n</li>\n\n<!-- Mobile -->\n<li\n  class="system-messages"\n  ng-show="isRiseVisionUser  && messages.length > 0"\n  ng-class="{\'visible-xs-inline-block\': isRiseVisionUser}">\n    <a href=""\n      class="system-messages-button"\n      action-sheet="\'system-messages-button-menu.html\'">\n        <i class="fa fa-bell"></i>\n        <span class="label label-danger system-messages-badge">{{messages.length}}</span>\n    </a>\n</li>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("user-settings-modal.html",'<div rv-spinner="spinnerOptions"\nrv-spinner-key="user-settings-modal"\nrv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="user-settings-label" class="modal-title">\n  <span ng-if="!isAdd">User Settings</span>\n  <span ng-if="isAdd">Add User</span>\n  </h2>\n</div>\n<div class="modal-body user-settings-modal">\n  <form role="form" novalidate name="forms.userSettingsForm">\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.username.$invalid && !forms.userSettingsForm.username.$pristine }"\n    >\n      <label>\n        Username *\n      </label>\n      <div ng-if="!isAdd">{{user.username}}</div>\n      <input id="user-settings-username"\n        type="email" required name="username"\n        class="form-control"\n        ng-if="isAdd"\n        ng-model="user.username"\n        />\n        <p ng-show="forms.userSettingsForm.username.$invalid && !forms.userSettingsForm.username.$pristine"\n          class="help-block validation-error-message-email">User name must be a valid email address.</p>\n    </div>\n    <div class="form-group">\n      <label for="user-settings-first-name">\n        First Name\n      </label>\n      <input id="user-settings-first-name"\n        type="text"\n        class="form-control"\n        ng-model="user.firstName"\n        />\n    </div>\n    <div class="form-group">\n      <label for="user-settings-last-name">\n        Last Name\n      </label>\n      <input id="user-settings-last-name"\n        type="text"\n        class="form-control"\n        ng-model="user.lastName"\n        />\n    </div>\n    <div class="form-group">\n      <label for="user-settings-phone">\n        Phone\n      </label>\n      <input\n        id="user-settings-phone"\n        type="tel"\n        class="form-control"\n        ng-model="user.telephone"\n         />\n    </div>\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.email.$invalid && !forms.userSettingsForm.email.$pristine }">\n      <label for="user-settings-email">\n        Email *\n      </label>\n      <input\n        id="user-settings-email"\n        type="email" required name="email"\n        class="form-control"\n        ng-model="user.email"\n        />\n        <p ng-show="forms.userSettingsForm.email.$invalid && !forms.userSettingsForm.email.$pristine"\n          class="help-block validation-error-message-email">A valid email address is required.</p>\n    </div>\n    <div class="checkbox">\n      <label>\n        <input type="checkbox"\n          id="user-settings-newsletter"\n          ng-model="user.mailSyncEnabled">\n          Subscribe To Email Updates\n      </label>\n    </div>\n    <div class="form-group">\n      <label>\n        Roles\n      </label>\n      <div class="checkbox" ng-repeat="role in availableRoles"\n        ng-show="editRoleVisible(role)">\n        <label>\n          <input type="checkbox"\n            id="user-settings-{{role.key}}"\n            checklist-model="user.roles"\n            ng-disabled="!editRoleAllowed(role)"\n            checklist-value="role.key"> {{role.name}}\n        </label>\n      </div>\n    </div>\n    <div class="form-group" ng-if="user.lastLogin">\n      <label>\n        Last Login\n      </label>\n      <div>{{user.lastLogin | humanReadableDateTime}}</div>\n    </div>\n    <div class="form-group" ng-if="!editingYourself && !isAdd">\n			<label for="user-settings-status">\n				Status\n			</label>\n			<select id="user-settings-status"\n        class="form-control selectpicker" ng-model="user.status">\n				<option value="1">Active</option>\n				<option value="0">Inactive</option>\n			</select>\n		</div>\n  </form>\n</div>\n<div class="modal-footer">\n  <!-- Save -->\n  <button type="button"\n    class="btn btn-success btn-fixed-width"\n    data-dismiss="modal"\n    ng-click="save()" id="save-button">\n    Save <i class="fa fa-white fa-check icon-right"></i>\n  </button><!-- Cancel\n  --><button type="button" class="btn btn-danger btn-fixed-width"\n    ng-if="!isAdd" ng-click="deleteUser()">\n		Delete <i class="fa fa-white fa-trash-o icon-right"></i>\n	</button><!-- Delete\n   --><button type="button" class="btn btn-primary btn-fixed-width" ng-click="closeModal()">\n    Cancel <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n</div>\n')}])}(),angular.module("risevision.common.header",["risevision.common.userstate","risevision.common.account","risevision.common.gapi","risevision.core.cache","risevision.core.company","risevision.common.company","risevision.common.localstorage","risevision.common.header.templates","risevision.common.loading","risevision.common.userstate","risevision.ui-flow","risevision.common.systemmessages","risevision.core.systemmessages","risevision.core.oauth2","risevision.common.geodata","risevision.store.data-gadgets","risevision.common.util","risevision.core.userprofile","risevision.common.registration","risevision.common.shoppingcart","checklist-model","ui.bootstrap","ngSanitize","rvScrollEvent","ngCsv","ngTouch"]).factory("bindToScopeWithWatch",[function(){return function(e,n,t){t.$watch(function(){return e.call()},function(e){t[n]=e})}}]).directive("commonHeader",["$modal","$rootScope","$q","$loading","$interval","oauth2APILoader","$log","$templateCache","userState","$location","bindToScopeWithWatch",function(e,n,t,o,i,a,s,r,l,c,u){return{restrict:"E",template:r.get("common-header.html"),scope:!1,link:function(e,t,o){e.navCollapsed=!0,e.inRVAFrame=l.inRVAFrame(),e[o.navOptions]||(e.navOptions=[{title:"Home",link:"#/"},{title:"Store",link:""},{title:"Account",link:""},{title:"Sellers",link:""},{title:"Platform",link:"http://rva.risevision.com/",target:"_blank"}]),e.hideShoppingCart=o.hideShoppingCart&&"0"!==o.hideShoppingCart&&"false"!==o.hideShoppingCart,u(l.isRiseVisionUser,"isRiseVisionUser",e),n.$on("$stateChangeSuccess",function(){e.inRVAFrame&&c.search("inRVA",e.inRVAFrame)})}}}]).directive("ngEnter",function(){return function(e,n,t){n.bind("keydown keypress",function(n){13===n.which&&(e.$apply(function(){e.$eval(t.ngEnter)}),n.preventDefault())})}}),angular.module("risevision.common.header").controller("SubcompanyBannerCtrl",["$scope","$modal","$loading","userState",function(e,n,t,o){e.inRVAFrame=o.inRVAFrame(),e.$watch(function(){return o.getSelectedCompanyId()},function(n){n&&(e.isSubcompanySelected=o.isSubcompanySelected(),e.selectedCompanyName=o.getSelectedCompanyName())}),e.switchToMyCompany=function(){o.resetCompany()}}]),angular.module("risevision.common.header").controller("GlobalAlertsCtrl",["$scope","$rootScope",function(e,n){e.errors=[],e.$on("risevision.user.authorized",function(){e.errors.length=0}),n.$on("risevision.common.globalError",function(n,t){e.errors.push(t)}),e.dismiss=function(n,t){e[n].splice(t,1)}}]),angular.module("risevision.common.header").controller("AuthButtonsCtr",["$scope","$modal","$templateCache","userState","$loading","cookieStore","$log","uiFlowManager","oauth2APILoader","bindToScopeWithWatch",function(e,n,t,o,i,a,s,r,l,c){window.$loading=i,e.spinnerOptions={color:"#999",hwaccel:!0,radius:10},e.register=function(){a.remove("surpressRegistration"),r.invalidateStatus("registrationComplete")},e.$on("risevision.user.signedOut",function(){a.remove("surpressRegistration")}),e.$on("risevision.uiStatus.validationCancelled",function(){a.remove("surpressRegistration")}),e.$watch(function(){return r.isStatusUndetermined()},function(n){e.undetermined=n,e.loading=n}),e.$watch(function(){return r.getStatus()},function(e,i){e&&(s.debug("status changed from",i,"to",e),"registerdAsRiseVisionUser"===e&&(!o.registrationModalInstance&&o.isLoggedIn()&&(o.registrationModalInstance=n.open({template:t.get("registration-modal.html"),controller:"RegistrationModalCtrl",backdrop:"static"})),o.registrationModalInstance.result.finally(function(){o.registrationModalInstance=null,r.invalidateStatus()})))}),e.$watch(function(){return o.isLoggedIn()},function(n){e.isLoggedIn=n,n===!0&&(e.userPicture=o.getUserPicture())}),c(o.isRiseVisionUser,"isRiseVisionUser",e),e.$watch(function(){return o.getUsername()},function(n){n&&(e.profile=o.getCopyOfProfile())}),e.$watch(function(){return r.getStatus()},function(n){n&&"signedInWithGoogle"===n&&e.login()}),e.login=function(e){i.startGlobal("auth-buttons-login"),o.authenticate(!0).then().finally(function(){i.stopGlobal("auth-buttons-login"),r.invalidateStatus(e)})},e.logout=function(){e.confirmSignOut()},e.confirmSignOut=function(e){n.open({template:t.get("signout-modal.html"),controller:"SignOutModalCtrl",size:e})},e.userSettings=function(e){n.open({template:t.get("user-settings-modal.html"),controller:"UserSettingsModalCtrl",size:e,resolve:{username:function(){return o.getUsername()},add:function(){return!1}}})},e.paymentMethods=function(e){n.open({template:t.get("payment-methods-modal.html"),controller:"PaymentMethodsModalCtrl",size:e})},i.startGlobal("auth-buttons-silent"),l().then().finally(function(){o.authenticate(!1).then().finally(function(){i.stopGlobal("auth-buttons-silent"),r.isStatusUndetermined()||r.invalidateStatus("registrationComplete")})})}]),angular.module("risevision.common.header").controller("CompanyButtonsCtrl",["$scope","$modal","$templateCache","userState","getCompany","$location","selectedCompanyUrlHandler",function(e,n,t,o,i,a,s){e.inRVAFrame=o.inRVAFrame(),e.$watch(function(){return o.getSelectedCompanyId()},function(n,t){n?(e.isSubcompanySelected=o.isSubcompanySelected(),s.updateUrl()):!n&&t&&(e.isSubcompanySelected=o.isSubcompanySelected(),s.updateUrl())}),e.$watch(function(){return o.getSelectedCompanyName()},function(n){n&&(e.selectedCompanyName=o.getSelectedCompanyName())}),e.$watch(function(){return o.isRiseVisionUser()},function(n){e.isRiseVisionUser=n,n===!0&&(e.isUserAdmin=o.isUserAdmin(),e.isPurchaser=o.isPurchaser())}),e.$watch(function(){return o.isRiseAdmin()},function(n){e.isRiseVisionAdmin=n}),e.$on("risevision.user.authorized",function(){s.init()}),e.$on("$stateChangeSuccess",s.updateSelectedCompanyFromUrl),e.$on("$routeChangeSuccess",s.updateSelectedCompanyFromUrl),e.addSubCompany=function(e){n.open({template:t.get("subcompany-modal.html"),controller:"SubCompanyModalCtrl",size:e})},e.companySettings=function(e,i){n.open({template:t.get("company-settings-modal.html"),controller:"CompanySettingsModalCtrl",size:i,resolve:{companyId:function(){return o.getSelectedCompanyId()}}})},e.companyUsers=function(e){n.open({template:t.get("company-users-modal.html"),controller:"CompanyUsersModalCtrl",size:e,backdrop:!0,resolve:{company:function(){return o.getCopyOfSelectedCompany()}}})},e.switchCompany=function(){var e=n.open({template:t.get("company-selector-modal.html"),controller:"companySelectorCtr",backdrop:!0,resolve:{companyId:function(){return o.getSelectedCompanyId()}}});e.result.then(o.switchCompany)},e.moveCompany=function(e){n.open({template:t.get("move-company-modal.html"),controller:"MoveCompanyModalCtrl",size:e})},e.resetCompany=function(){o.resetCompany()}}]),angular.module("risevision.common.header").filter("surpressZero",function(){return function(e){return e?e:""}}).controller("ShoppingCartButtonCtrl",["$scope","shoppingCart","userState","$log","STORE_URL",function(e,n,t,o,i){e.shoppingCartUrl=i+"#/shopping-cart",e.cart={},e.cart.items=n.getItems(),e.$watch(function(){return t.isRiseVisionUser()},function(n){e.isRiseVisionUser=n}),e.$on("risevision.user.signedOut",function(){n.destroy()})}]),angular.module("risevision.common.header").controller("CloseFrameButtonCtrl",["$scope","$log","gadgetsService",function(e,n,t){e.closeIFrame=function(){n.debug("gadgetsService.closeIFrame"),t.closeIFrame()}}]),angular.module("risevision.common.header").controller("SystemMessagesButtonCtrl",["$scope","userState","$log","$sce","getCoreSystemMessages","systemMessages",function(e,n,t,o,i,a){e.messages=a,e.$watch(function(){return n.isRiseVisionUser()},function(n){e.isRiseVisionUser=n}),e.renderHtml=function(e){return o.trustAsHtml(e)},e.$watch(function(){return n.getSelectedCompanyId()},function(e){null!==e?(a.clear(),i(e).then(a.addMessages)):a.clear()})}]),angular.module("risevision.common.header").controller("PaymentMethodsModalCtrl",["$scope","$modalInstance","$modal","$templateCache",function(e,n,t,o){e.closeModal=function(){n.dismiss("cancel")},e.creditCards=function(e){t.open({template:o.get("credit-cards-modal.html"),controller:"CreditCardsModalCtrl",size:e})}}]).controller("CreditCardsModalCtrl",["$scope","$modalInstance",function(e,n){e.closeModal=function(){n.dismiss("cancel")}}]),angular.module("risevision.common.header").controller("RegistrationModalCtrl",["$scope","$modalInstance","$loading","registerAccount","$log","cookieStore","userState","pick","uiFlowManager","humanReadableError",function(e,n,t,o,i,a,s,r,l,c){var u=s.getCopyOfProfile()||{};a.remove("surpressRegistration"),e.profile=r(u,"email","mailSyncEnabled"),e.registering=!1,e.profile.accepted=angular.isDefined(u.termsAcceptanceDate)&&null!==u.termsAcceptanceDate,angular.isDefined(e.profile.mailSyncEnabled)||(e.profile.mailSyncEnabled=!1),e.closeModal=function(){a.put("surpressRegistration",!0),n.dismiss("cancel")};var d=e.$watch(function(){return l.isStatusUndetermined()},function(e){e===!0?t.start("registration-modal"):e===!1&&("registrationComplete"===l.getStatus()&&(n.close("success"),d()),t.stop("registration-modal"))});e.save=function(){e.forms.registrationForm.accepted.$pristine=!1,e.forms.registrationForm.email.$pristine=!1,e.forms.registrationForm.$invalid||(e.registering=!0,t.start("registration-modal"),o(s.getUsername(),e.profile).then(function(){s.authenticate(!1).then().finally(function(){n.close("success")})},function(e){alert("Error: "+c(e)),i.error(e)}).finally(function(){e.registering=!1,t.stop("registration-modal"),s.authenticate(!1)}))},e.forms={}}]),angular.module("risevision.common.header").controller("MoveCompanyModalCtrl",["$scope","$modalInstance","moveCompany","lookupCompany","userState","$loading",function(e,n,t,o,i,a){e.company={},e.errors=[],e.messages=[],e.$watch("loading",function(e){e?a.start("move-company-modal"):a.stop("move-company-modal")}),e.selectedCompany=i.getCopyOfSelectedCompany(),e.closeModal=function(){n.dismiss("cancel")},e.moveCompany=function(){e.messages=[],e.loading=!0,t(e.company.authKey,i.getSelectedCompanyId()).then(function(){e.messages.push("Success. The company has been moved under your company."),e.moveSuccess=!0},function(n){e.errors.push("Error: "+JSON.stringify(n))}).finally(function(){e.loading=!1})},e.getCompany=function(){e.errors=[],e.messages=[],e.loading=!0,o(e.company.authKey).then(function(n){angular.extend(e.company,n)},function(n){e.errors.push("Failed to retrieve company. "+n.message)}).finally(function(){e.loading=!1})},e.$watch("moveSuccess",function(n){e.dismissButtonText=n?"Close":"Cancel"})}]),angular.module("risevision.common.header").controller("CompanySettingsModalCtrl",["$scope","$modalInstance","updateCompany","companyId","COUNTRIES","REGIONS_CA","REGIONS_US","getCompany","regenerateCompanyField","$window","$loading","humanReadableError","userState","deleteCompany",function(e,n,t,o,i,a,s,r,l,c,u,d,m,p){function g(){e.company.sellerId=e.isRiseStoreAdmin?e.company.isSeller?"yes":null:void 0}e.company={id:o},e.countries=i,e.regionsCA=a,e.regionsUS=s,e.isRiseStoreAdmin=m.isRiseStoreAdmin(),e.$watch("loading",function(e){e?u.start("company-settings-modal"):u.stop("company-settings-modal")}),e.loading=!1,e.forms={},o&&(e.loading=!0,r(o).then(function(n){e.company=n,e.company.isSeller=n&&n.sellerId?!0:!1},function(e){alert("An error has occurred. "+d(e))}).finally(function(){e.loading=!1})),e.closeModal=function(){n.dismiss("cancel")},e.save=function(){e.loading=!0,g(),t(e.company.id,e.company).then(function(){m.updateCompanySettings(e.company),n.close("success")}).catch(function(e){alert("Error(s): "+d(e))}).finally(function(){e.loading=!1})},e.deleteCompany=function(){confirm("Are you sure you want to delete this company?")&&(e.loading=!0,p(e.company.id).then(function(){m.getUserCompanyId()===e.company.id?m.signOut():m.getSelectedCompanyId()===e.company.id&&m.resetCompany(),n.close("success")}).catch(function(e){alert("Error(s): "+d(e))}).finally(function(){e.loading=!1}))},e.resetAuthKey=function(){c.confirm("Resetting the Company Authentication Key will cause existing Data Gadgets to no longer report data until they are updated with the new Key.")&&(u.start("company-settings-modal"),l(e.company.id,"authKey").then(function(n){e.company.authKey=n.item},function(e){alert("Error: "+d(e))}).finally(function(){u.stop("company-settings-modal")}))},e.resetClaimId=function(){c.confirm("Resetting the Company Claim Id will cause existing installations to no longer be associated with your Company.")&&(u.start("company-settings-modal"),l(e.company.id,"claimId").then(function(n){e.company.claimId=n.item},function(e){alert("Error: "+d(e))}).finally(function(){u.stop("company-settings-modal")}))}}]),angular.module("risevision.common.header").controller("SubCompanyModalCtrl",["$scope","$modalInstance","$modal","$templateCache","createCompany","COUNTRIES","REGIONS_CA","REGIONS_US","userState","$loading","humanReadableError",function(e,n,t,o,i,a,s,r,l,c,u){e.company={},e.countries=a,e.regionsCA=s,e.regionsUS=r,e.forms={},e.$watch("loading",function(e){e?c.start("add-subcompany-modal"):c.stop("add-subcompany-modal")}),e.closeModal=function(){n.dismiss("cancel")},e.save=function(){e.loading=!0,i(l.getSelectedCompanyId(),e.company).then(function(){n.close("success")},function(e){alert("Error: "+u(e))}).finally(function(){e.loading=!1})},e.moveCompany=function(e){t.open({template:o.get("move-company-modal.html"),controller:"MoveCompanyModalCtrl",size:e})}}]),angular.module("risevision.common.header").controller("companySelectorCtr",["$scope","$modalInstance","companyService","companyId","BaseList","$loading",function(e,n,t,o,i,a){function s(){e.loading=!0,e.companies.endOfList||t.getCompanies(o,e.search.searchString,e.companies.cursor,r,null).then(function(n){n&&n.items&&e.companies.add(n.items,n.cursor)}).finally(function(){e.loading=!1})}var r=20;e.companies=new i(r),e.search={searchString:""},e.$watch("loading",function(e){e?(a.start("company-selector-modal"),a.start("company-selector-modal-list")):(a.stop("company-selector-modal"),a.stop("company-selector-modal-list"))}),e.closeModal=function(){n.dismiss("cancel")},0===e.companies.list.length&&s(),e.doSearch=function(){e.companies.clear(),s()},e.setCompany=function(e){n.close(e)},e.handleScroll=function(e,n){n&&e.target.scrollHeight-e.target.clientHeight-e.target.scrollTop<20&&s()}}]),angular.module("risevision.common.header").filter("roleLabel",["userRoleMap",function(e){return function(n){return e[n]}}]).controller("CompanyUsersModalCtrl",["$scope","$modalInstance","$modal","$templateCache","company","getUsers","$loading",function(e,n,t,o,i,a,s){e.$watch("loading",function(e){e?(s.start("company-users-modal"),s.start("company-users-list")):(s.stop("company-users-modal"),s.stop("company-users-list"))}),e.sort={field:"username",descending:!1},e.search={searchString:""},e.changeSorting=function(n){var t=e.sort;t.field===n?t.descending=!t.descending:(t.field=n,t.descending=!1)};var r=function(){e.loading=!0,a({companyId:i.id,search:e.search.searchString}).then(function(n){e.users=n}).finally(function(){e.loading=!1})};r(),e.addUser=function(e){var n=t.open({template:o.get("user-settings-modal.html"),controller:"AddUserModalCtrl",size:e,resolve:{companyId:function(){return i.id}}});n.result.finally(r)},e.editUser=function(e,n){var i=t.open({template:o.get("user-settings-modal.html"),controller:"UserSettingsModalCtrl",size:n,resolve:{username:function(){return e},add:function(){return!1}}});i.result.finally(r)},e.closeModal=function(){n.dismiss("cancel")},e.doSearch=function(){e.users=[],r()}}]),angular.module("risevision.common.header").filter("humanReadableDateTime",[function(){return function(e){return e?(e=new Date(e),e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+" at "+e.toLocaleTimeString()+" EST"):""}}]).controller("AddUserModalCtrl",["$scope","addUser","$modalInstance","companyId","userState","userRoleMap","humanReadableError","$loading","$timeout",function(e,n,t,o,i,a,s,r){e.user={},e.isAdd=!0,e.availableRoles=[],angular.forEach(a,function(n,t){e.availableRoles.push({key:t,name:n})}),e.$watch("user.status",function(n){"string"==typeof e.user.status&&(e.user.status=parseInt(n))}),e.$watch("loading",function(e){e?r.start("user-settings-modal"):r.stop("user-settings-modal")}),e.save=function(){e.forms.userSettingsForm.email.$pristine=!1,e.forms.userSettingsForm.username.$pristine=!1,e.forms.userSettingsForm.$invalid||(e.loading=!0,n(o,e.user.username,e.user).then(function(){t.close("success")},function(e){alert("Error"+s(e))}).finally(function(){e.loading=!1}))},e.closeModal=function(){t.dismiss("cancel")},e.editRoleAllowed=function(e){return i.isRiseAdmin()?!0:i.isUserAdmin()?"sa"===e.key||"ba"===e.key?!1:!0:!1},e.editRoleVisible=function(e){return i.isRiseAdmin()?!0:i.isUserAdmin()||i.isRiseVisionUser()?"sa"===e.key||"ba"===e.key?!1:!0:!1},e.forms={}}]).controller("UserSettingsModalCtrl",["$scope","$modalInstance","updateUser","getUserProfile","deleteUser","addUser","username","userRoleMap","$log","$loading","userState","uiFlowManager","humanReadableError",function(e,n,t,o,i,a,s,r,l,c,u,d,m){e.user={},e.$watch("loading",function(e){e?c.start("user-settings-modal"):c.stop("user-settings-modal")}),e.availableRoles=[],angular.forEach(r,function(n,t){e.availableRoles.push({key:t,name:n})}),e.$watch("user.status",function(n){"string"==typeof e.user.status&&(e.user.status=parseInt(n))}),e.isUserAdmin=u.isUserAdmin(),e.username=s,e.loading=!0,o(s).then(function(n){e.user=n,e.editingYourself=u.getUsername()===n.username
}).finally(function(){e.loading=!1}),e.closeModal=function(){n.dismiss("cancel")},e.deleteUser=function(){confirm("Are you sure you want to delete this user?")&&i(e.username).then(function(){e.username===u.getUsername()&&u.signOut().then().finally(function(){d.invalidateStatus("registrationComplete")})}).finally(function(){n.dismiss("deleted")})},e.save=function(){e.forms.userSettingsForm.email.$pristine=!1,e.forms.userSettingsForm.$invalid||(e.loading=!0,t(s,e.user).then(function(){n.close("success")},function(e){l.debug(e),alert("Error: "+m(e))}).finally(function(){s===u.getUsername()&&u.refreshProfile(),e.loading=!1}))},e.editRoleAllowed=function(n){return u.isRiseAdmin()?!0:u.isUserAdmin()?"sa"===n.key||"ba"===n.key?!1:"ua"===n.key&&u.getUsername()===e.user.username?!1:!0:!1},e.editRoleVisible=function(e){return u.isRiseAdmin()?!0:u.isUserAdmin()||u.isRiseVisionUser()?"sa"===e.key||"ba"===e.key?!1:!0:!1},e.forms={}}]),angular.module("risevision.common.header").controller("SignOutModalCtrl",["$scope","$modalInstance","$log","userState",function(e,n,t,o){e.closeModal=function(){n.dismiss("cancel")},e.signOut=function(e){o.signOut(e).then(function(){t.debug("user signed out")},function(e){t.error("sign out failed",e)}),n.dismiss("success")}}]),angular.module("risevision.common.header").service("offCanvas",["$window",function(e){var n={visible:!1,enabled:!1};return n.enabled=angular.element(e).width()<=1200?!0:!1,n.toggle=function(e){e&&e.stopPropagation(),(n.enabled||n.visible)&&(n.visible=!n.visible,n.visible?n.nav.addClass("is-off-canvas-opened"):n.nav.removeClass("is-off-canvas-opened"))},n.registerNav=function(e){n.nav=e,n.nav.addClass("off-canvas--container")},window.onresize=function(){n.enabled=angular.element(e).width()<=1200?!0:!1},n}]).directive("offCanvasContent",["offCanvas","$swipe",function(e,n){return{restrict:"A",link:function(t,o){var i;n.bind(o,{start:function(e){i=e},end:function(n){n.x-i.x>0&&e.toggle()}})}}}]).directive("offCanvasNav",["offCanvas","$swipe",function(e,n){return{restrict:"A",link:function(t,o){o.addClass("off-canvas--nav"),e.registerNav(o);var i;n.bind(o,{start:function(e){i=e},end:function(n){n.x-i.x<0&&e.toggle()}}),o.bind("tap",e.toggle),o.bind("click",e.toggle)}}}]).directive("offCanvasToggle",["offCanvas",function(e){return{restrict:"A",link:function(n,t){t.bind("tap",e.toggle),t.bind("click",e.toggle)}}}]),angular.module("risevision.common.header").directive("actionSheet",["$document","$compile",function(e,n){return{restrict:"A",link:function(t,o,i){var a=e.find("body").eq(0),s=!1,r=document.getElementById("action-sheet-backdrop");angular.isObject(r)?r=angular.element(r):(r=angular.element('<div id="action-sheet-backdrop" class="modal-backdrop"></div>'),a.append(r)),t.templateUrl=t.$eval(i.actionSheet),t.title=t.$eval(i.title);var l=angular.element('<div class="action-sheet"><ng-include src="templateUrl"></ng-include></div>'),c=n(l)(t);a.append(c);var u=function(){s=!s,c.toggleClass("is-action-sheet-opened"),r.toggleClass("is-action-sheet-opened"),s?(r.bind("tap",u),r.bind("click",u)):(r.unbind("tap"),r.unbind("click"))};o.bind("tap",u),o.bind("click",u),l.bind("tap",u),l.bind("click",u)}}}]).directive("replaceInclude",function(){return{require:"ngInclude",restrict:"A",link:function(e,n){n.replaceWith(n.children())}}}),function(e){"use strict";var n=150;e.module("rvScrollEvent",[]).directive("rvScrollEvent",["$parse","$window",function(e,t){return{scope:!1,link:function(o,i,a){var s,r,l=e(a.rvScrollEvent),c=i[0],u="scroll",d={x:0,y:0},m=function(){r=function(e){d.x=c.scrollLeft,d.y=c.scrollTop,p(e),g(),f(e,!1)},i.bind(u,r)},p=function(e){s=t.setInterval(function(){d.x===c.scrollLeft&&d.y===c.scrollTop?(t.clearInterval(s),m(),f(e,!0)):(d.x=c.scrollLeft,d.y=c.scrollTop)},n)},g=function(){i.unbind(u,r)},f=function(e,n){o.$apply(function(){l(o,{$event:e,isEndEvent:n})})};m()}}}])}(angular),function(e){"use strict";e.module("risevision.common.util",[]).value("humanReadableError",function(e){var n;return n=e.message?e.message:e.error?e.error.message?e.message:e.error:e,JSON.stringify(n)}).value("BaseList",function(e){this.list=[],this.maxCount=e?e:20,this.cursor=null,this.endOfList=!1,this.searchString="",this.clear=function(){this.list=[],this.cursor=null,this.endOfList=!1},this.append=function(e){for(var n=0;n<e.length;n++)this.list.push(e[n])},this.concat=function(e){this.list=this.list.concat(e)},this.add=function(n,t){this.cursor=t,this.endOfList=n.length<e,this.concat(n)},this.remove=function(e){this.list.splice(e,1)}}).factory("dateIsInRange",[function(){return function(e,n,t){var o,i,a=!0;try{n&&(o=n.match(/(\d{4})\-(\d{2})\-(\d{2})/),i=new Date(o[1],parseInt(o[2])-1,o[3],0,0,0,0),a=e>=i),a&&t&&(o=t.match(/(\d{4})\-(\d{2})\-(\d{2})/),i=new Date(o[1],parseInt(o[2])-1,o[3],0,0,0,0),a=i>=e)}catch(s){a=!1}return a}}])}(angular),angular.module("risevision.common.geodata",[]).value("COUNTRIES",[["Afghanistan","AF"],["Albania","AL"],["Algeria","DZ"],["American Samoa","AS"],["Andorra","AD"],["Angola","AO"],["Anguilla","AI"],["Antarctica","AQ"],["Antigua and Barbuda","AG"],["Argentina","AR"],["Armenia","AM"],["Aruba","AW"],["Australia","AU"],["Austria","AT"],["Azerbaijan","AZ"],["Bahamas","BS"],["Bahrain","BH"],["Bangladesh","BD"],["Barbados","BB"],["Belarus","BY"],["Belgium","BE"],["Belize","BZ"],["Benin","BJ"],["Bermuda","BM"],["Bhutan","BT"],["Bolivia","BO"],["Bosnia and Herzegovina","BA"],["Botswana","BW"],["Bouvet Island","BV"],["Brazil","BR"],["British Indian Ocean Territory","IO"],["British Virgin Islands","VG"],["Brunei Darussalam","BN"],["Bulgaria","BG"],["Burkina Faso","BF"],["Burundi","BI"],["Cambodia","KH"],["Cameroon","CM"],["Canada","CA"],["Cape Verde","CV"],["Cayman Islands","KY"],["Central African Republic","CF"],["Chad","TD"],["Chile","CL"],["China","CN"],["Christmas Island","CX"],["Cocos","CC"],["Colombia","CO"],["Comoros","KM"],["Congo","CG"],["Cook Islands","CK"],["Costa Rica","CR"],["Croatia","HR"],["Cuba","CU"],["Cyprus","CY"],["Czech Republic","CZ"],["Denmark","DK"],["Djibouti","DJ"],["Dominica","DM"],["Dominican Republic","DO"],["East Timor","TP"],["Ecuador","EC"],["Egypt","EG"],["El Salvador","SV"],["Equatorial Guinea","GQ"],["Eritrea","ER"],["Estonia","EE"],["Ethiopia","ET"],["Falkland Islands","FK"],["Faroe Islands","FO"],["Fiji","FJ"],["Finland","FI"],["France","FR"],["French Guiana","GF"],["French Polynesia","PF"],["French Southern Territories","TF"],["Gabon","GA"],["Gambia","GM"],["Georgia","GE"],["Germany","DE"],["Ghana","GH"],["Gibraltar","GI"],["Greece","GR"],["Greenland","GL"],["Grenada","GD"],["Guadeloupe","GP"],["Guam","GU"],["Guatemala","GT"],["Guinea","GN"],["Guinea-Bissau","GW"],["Guyana","GY"],["Haiti","HT"],["Heard and McDonald Islands","HM"],["Honduras","HN"],["Hong Kong","HK"],["Hungary","HU"],["Iceland","IS"],["India","IN"],["Indonesia","ID"],["Iran","IR"],["Iraq","IQ"],["Ireland","IE"],["Israel","IL"],["Italy","IT"],["Ivory Coast","CI"],["Jamaica","JM"],["Japan","JP"],["Jordan","JO"],["Kazakhstan","KZ"],["Kenya","KE"],["Kiribati","KI"],["Kuwait","KW"],["Kyrgyzstan","KG"],["Laos","LA"],["Latvia","LV"],["Lebanon","LB"],["Lesotho","LS"],["Liberia","LR"],["Libya","LY"],["Liechtenstein","LI"],["Lithuania","LT"],["Luxembourg","LU"],["Macau","MO"],["Macedonia","MK"],["Madagascar","MG"],["Malawi","MW"],["Malaysia","MY"],["Maldives","MV"],["Mali","ML"],["Malta","MT"],["Marshall Islands","MH"],["Martinique","MQ"],["Mauritania","MR"],["Mauritius","MU"],["Mayotte","YT"],["Mexico","MX"],["Micronesia","FM"],["Moldova","MD"],["Monaco","MC"],["Mongolia","MN"],["Montserrat","MS"],["Morocco","MA"],["Mozambique","MZ"],["Myanmar","MM"],["Namibia","NA"],["Nauru","NR"],["Nepal","NP"],["Netherlands","NL"],["Netherlands Antilles","AN"],["New Caledonia","NC"],["New Zealand","NZ"],["Nicaragua","NI"],["Niger","NE"],["Nigeria","NG"],["Niue","NU"],["Norfolk Island","NF"],["North Korea","KP"],["Northern Mariana Islands","MP"],["Norway","NO"],["Oman","OM"],["Pakistan","PK"],["Palau","PW"],["Panama","PA"],["Papua New Guinea","PG"],["Paraguay","PY"],["Peru","PE"],["Philippines","PH"],["Pitcairn","PN"],["Poland","PL"],["Portugal","PT"],["Puerto Rico","PR"],["Qatar","QA"],["Reunion","RE"],["Romania","RO"],["Russian Federation","RU"],["Rwanda","RW"],["S. Georgia and S. Sandwich Islands","GS"],["Saint Kitts and Nevis","KN"],["Saint Lucia","LC"],["Saint Vincent and The Grenadines","VC"],["Samoa","WS"],["San Marino","SM"],["Sao Tome and Principe","ST"],["Saudi Arabia","SA"],["Senegal","SN"],["Seychelles","SC"],["Sierra Leone","SL"],["Singapore","SG"],["Slovakia","SK"],["Slovenia","SI"],["Solomon Islands","SB"],["Somalia","SO"],["South Africa","ZA"],["South Korea","KR"],["Soviet Union","SU"],["Spain","ES"],["Sri Lanka","LK"],["St. Helena","SH"],["St. Pierre and Miquelon","PM"],["Sudan","SD"],["Suriname","SR"],["Svalbard and Jan Mayen Islands","SJ"],["Swaziland","SZ"],["Sweden","SE"],["Switzerland","CH"],["Syria","SY"],["Taiwan","TW"],["Tajikistan","TJ"],["Tanzania","TZ"],["Thailand","TH"],["Togo","TG"],["Tokelau","TK"],["Tonga","TO"],["Trinidad and Tobago","TT"],["Tunisia","TN"],["Turkey","TR"],["Turkmenistan","TM"],["Turks and Caicos Islands","TC"],["Tuvalu","TV"],["Uganda","UG"],["Ukraine","UA"],["United Arab Emirates","AE"],["United Kingdom","UK"],["United States","US"],["Uruguay","UY"],["US Minor Outlying Islands","UM"],["US Virgin Islands","VI"],["Uzbekistan","UZ"],["Vanuatu","VU"],["Venezuela","VE"],["Viet Nam","VN"],["Wallis and Futuna Islands","WF"],["Western Sahara","EH"],["Yemen","YE"],["Yugoslavia","YU"],["Zaire","ZR"],["Zambia","ZM"],["Zimbabwe","ZW"]]).value("REGIONS_CA",[["Alberta","AB"],["British Columbia","BC"],["Manitoba","MB"],["New Brunswick","NB"],["Newfoundland and Labrador","NL"],["Northwest Territories","NT"],["Nova Scotia","NS"],["Nunavut","NV"],["Ontario","ON"],["Prince Edward Island","PE"],["Quebec","QC"],["Saskatchewan","SK"],["Yukon Territory","YT"]]).value("REGIONS_US",[["Alabama","AL"],["Alaska","AK"],["Arizona","AZ"],["Arkansas","AR"],["California","CA"],["Colorado","CO"],["Connecticut","CT"],["Delaware","DE"],["District of Columbia","DC"],["Florida","FL"],["Georgia","GA"],["Hawaii","HI"],["Idaho","ID"],["Illinois","IL"],["Indiana","IN"],["Iowa","IA"],["Kansas","KS"],["Kentucky","KY"],["Louisiana","LA"],["Maine","ME"],["Maryland","MD"],["Massachusetts","MA"],["Michigan","MI"],["Minnesota","MN"],["Mississippi","MS"],["Missouri","MO"],["Montana","MT"],["Nebraska","NE"],["Nevada","NV"],["New Hampshire","NH"],["New Jersey","NJ"],["New Mexico","NM"],["New York","NY"],["North Carolina","NC"],["North Dakota","ND"],["Ohio","OH"],["Oklahoma","OK"],["Oregon","OR"],["Pennsylvania","PA"],["Rhode Island","RI"],["South Carolina","SC"],["South Dakota","SD"],["Tennessee","TN"],["Texas","TX"],["Utah","UT"],["Vermont","VT"],["Virginia","VA"],["Washington","WA"],["West Virginia","WV"],["Wisconsin","WI"],["Wyoming","WY"]]),function(e){"use strict";e.module("risevision.common.popupdetector",[]).factory("popupTest",["$q","$window","$timeout",function(e,n,t){return function(){var o=e.defer(),i="<strong>Sign In Pop-Up Blocked</strong> - Allow pop-ups from store.risevision.com in the browser settings and Sign In again.";return t(function(){var e=n.open("","","width=50, height=50",!0);t(function(){try{e&&0!==e.outerHeight?(e.close(),o.resolve(!0)):o.reject(i)}catch(n){o.reject(i);try{e.close()}catch(t){}}},25)},2500),o.promise}}])}(angular),function(e){"use strict";var n=function(e){return"/"===e[0]&&(e=e.slice(1)),e},t=function(e){var n={};return e.split("&").forEach(function(e){var t=e.split("=");n[t[0]]=t[1]}),n};e.module("risevision.common.userstate",["risevision.common.gapi","risevision.common.localstorage","risevision.common.config","risevision.core.cache","risevision.core.oauth2","ngBiscuit","risevision.core.util","risevision.core.userprofile","risevision.core.company","risevision.common.loading","LocalStorageModule"]).value("DEFAULT_PROFILE_PICTURE","http://api.randomuser.me/portraits/med/men/33.jpg").value("OAUTH2_SCOPES","https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile").value("GOOGLE_OAUTH2_URL","https://accounts.google.com/o/oauth2/auth").run(["$location","userState","$log","gapiLoader","localStorageService",function(e,o,i,a,s){var r=e.path(),l=t(n(r));i.debug("URL params",l),l.access_token&&a().then(function(e){i.debug("Setting token",l.access_token),e.auth.setToken({access_token:l.access_token}),o._setUserToken(l.access_token),o.authenticate()});var c=s.get("risevision.common.userState");if(c&&(o._restoreState(c),s.remove("risevision.common.userState")),l.state){var u=JSON.parse(l.state);u.u&&e.path(u.u)}}]).factory("userState",["$injector","$q","$log","oauth2APILoader","$location","CLIENT_ID","gapiLoader","pick","cookieStore","OAUTH2_SCOPES","userInfoCache","getOAuthUserInfo","getUserProfile","getCompany","$rootScope","$interval","$loading","rvStorage","$window","GOOGLE_OAUTH2_URL","localStorageService","$document",function(n,t,o,i,a,s,r,l,c,u,d,m,p,g,f,h,v,y,b,C,S,w){var A=function(){return c.get("rv-token")},I={profile:{},user:{},userCompany:{},selectedCompany:{},roleMap:{},userToken:A(),inRVAFrame:e.isDefined(a.search().inRVA)},$=null,k=function(){var e=A();e!==I.userToken?b.location.reload():I.userToken&&(v.startGlobal("risevision.user.authenticate"),_(!1).finally(function(){I.userToken||(o.debug("Authentication failed. Reloading..."),b.location.reload())}))},U=function(){var e,n,t=w[0];"undefined"!=typeof t.hidden?(n="visibilitychange",e="visibilityState"):"undefined"!=typeof t.mozHidden?(n="mozvisibilitychange",e="mozVisibilityState"):"undefined"!=typeof t.msHidden?(n="msvisibilitychange",e="msVisibilityState"):"undefined"!=typeof t.webkitHidden&&(n="webkitvisibilitychange",e="webkitVisibilityState"),t.addEventListener(n,function(){o.debug("visibility: "+t[e]),"visible"===t[e]&&k()})};U();var M=function(e){var n=function(){};return n.prototype=e,new n},R=function(){return I.user?I.user.userId:null},E=function(){I.userToken=R(),W(I.userToken)},L=function(){return o.debug("Clearing user token..."),P(),I.userToken=null,Y(),r().then(function(e){e.auth.setToken()})},N=function(){h.cancel($),$=h(function(){h.cancel($),G(!0)},33e5)},P=function(){h.cancel($),$=null},T=function(e){return/^([0-9])+\.([0-9])+\.([0-9])+\.([0-9])+$/.test(e)?!0:!1},x=function(){var e;if(!e){var n=a.host();if(T(n))e=n;else{var t=n.split(".");e=t.length>1?t.slice(t.length-2).join("."):n}o.debug("baseDomain",e)}return e},F=function(e){for(var n in e)delete e[n]},O=function(n,t){F(t),e.extend(t,n)},D=function(){F(I.user),F(I.selectedCompany),F(I.profile),F(I.userCompany),I.roleMap={},o.debug("User state has been reset.")},V=function(){var n=t.defer();return m().then(function(t){p(I.user.username,!0).then(function(o){O(e.extend({username:t.email},o),I.profile),I.roleMap={},I.profile.roles&&I.profile.roles.forEach(function(e){I.roleMap[e]=!0}),n.resolve()},n.reject)},n.reject),n.promise},G=function(e){var n=t.defer(),i={client_id:s,scope:u,cookie_policy:a.protocol()+"://"+x()};return e?i.immediate=!0:i.prompt="select_account",r().then(function(t){t.auth.authorize(i,function(t){o.debug("authResult",t),t&&!t.error?(N(),m().then(function(o){I.user.username&&I.profile.username&&I.user.username===o.email?n.resolve(t):(O({userId:o.id,username:o.email,picture:o.picture},I.user),E(),V().then(function(){return g().then(function(e){O(e,I.userCompany),O(e,I.selectedCompany)},function(){F(I.userCompany)}).finally(function(){n.resolve(t),f.$broadcast("risevision.user.authorized"),e||f.$broadcast("risevision.user.userSignedIn")})},function(){n.resolve(t),f.$broadcast("risevision.user.authorized"),e||f.$broadcast("risevision.user.userSignedIn")}))},function(e){F(I.user),n.reject(e)})):(F(I.user),n.reject("not authorized"))})},n.reject),n.promise},B=function(e){if(e){var n=b.location.href.substr(0,b.location.href.indexOf("#"))||b.location.href;S.set("risevision.common.userState",I),b.location=C+"?response_type=token&scope="+encodeURIComponent(u)+"&client_id="+s+"&redirect_uri="+encodeURIComponent(n)+"&prompt=select_account&state="+encodeURIComponent(JSON.stringify({u:a.path()}));var o=t.defer();return o.promise}return _(e)},_=function(n){var i=t.defer();o.debug("authentication called");var a=function(){n&&(D(),d.removeAll()),r().then(function(){var t=e.isDefined(I.userToken)&&null!==I.userToken;if(o.debug("userAuthed",t),n||t===!0)G(!n).then(function(e){e&&!e.error?i.resolve():(L(),o.debug("Authentication Error: "+e.error),i.reject("Authentication Error: "+e.error))},function(){L(),i.reject()}).finally(function(){v.stopGlobal("risevision.user.authenticate")});else{var a="user is not authenticated";o.debug(a),i.reject(a),F(I.user),v.stopGlobal("risevision.user.authenticate")}})};return a(),n&&v.startGlobal("risevision.user.authenticate"),i.promise},j=function(e){var n=t.defer();return d.removeAll(),r().then(function(t){e&&(b.logoutFrame.location="https://accounts.google.com/Logout"),t.auth.signOut(),L().then(function(){D(),F(I.user),f.$broadcast("risevision.user.signedOut"),o.debug("User is signed out."),n.resolve()},function(){n.reject()})}),n.promise},q=function(){return I.user.username?!0:!1},K=function(){return null!==I.profile.username&&void 0!==I.profile.username},z=function(n){return e.isDefined(I.roleMap[n])},H=function(){return b.gapi?b.gapi.auth.getToken():null},W=function(e){var n=x();"localhost"===n?c.put("rv-token",e):c.put("rv-token",e,{domain:n,path:"/"})},Y=function(){var e=x();"localhost"===e?c.remove("rv-token"):c.remove("rv-token",{domain:e,path:"/"})},Z={getUserCompanyId:function(){return I.userCompany&&I.userCompany.id||null},getSelectedCompanyId:function(){return I.selectedCompany&&I.selectedCompany.id||null},getSelectedCompanyName:function(){return I.selectedCompany&&I.selectedCompany.name||null},updateCompanySettings:function(e){e&&I.selectedCompany&&(O(e,I.selectedCompany),I.userCompany.id===I.selectedCompany.id&&O(e,I.userCompany))},getSelectedCompanyCountry:function(){return I.selectedCompany&&I.selectedCompany.country||null},getUsername:function(){return I.user&&I.user.username||null},getCopyOfProfile:function(){return M(I.profile)},resetCompany:function(){O(I.userCompany,I.selectedCompany)},getCopyOfUserCompany:function(){return M(I.userCompany)},getCopyOfSelectedCompany:function(){return M(I.selectedCompany)},switchCompany:function(e){O(e,I.selectedCompany)},isSubcompanySelected:function(){return I.selectedCompany&&I.selectedCompany.id!==(I.userCompany&&I.userCompany.id)},getUserPicture:function(){return I.user.picture},hasRole:z,inRVAFrame:function(){return I.inRVAFrame},isRiseAdmin:function(){return z("sa")},isRiseStoreAdmin:function(){return z("ba")},isUserAdmin:function(){return z("ua")},isPurchaser:function(){return z("pu")},isSeller:function(){return I.selectedCompany&&I.selectedCompany.sellerId?!0:!1},isRiseVisionUser:K,isLoggedIn:q,authenticate:I.inRVAFrame?_:B,signOut:j,refreshProfile:V,getAccessToken:H,_restoreState:function(n){e.extend(I,n),o.debug("userState restored with",n)},_setUserToken:function(e){I.userToken=e}};return window.userState=Z,Z}])}(angular),function(e){"use strict";e.module("risevision.ui-flow",[]).constant("uiStatusDependencies",{_dependencies:{},addDependencies:function(n){e.extend(this._dependencies,n)}}).factory("uiFlowManager",["$log","$q","$injector","uiStatusDependencies","$rootScope",function(n,t,o,i,a){var s,r,l=i._dependencies,c=function(){return function(){var e=t.defer();return e.resolve(!0),e.promise}},u=function(e){var n;try{n=o.get(e)}catch(t){n=c()}return n},d=function(o){var i;n.debug("Attempting to reach status",o,"...");var a=l[o];if(a){a instanceof Array||(a=[a]);var s=t.defer(),r=s;e.forEach(a,function(e){var a=t.defer();s.promise.then(a.resolve,function(){d(e).then(function(){l[e]&&n.debug("Deps for status",e,"satisfied."),u(o)().then(function(){n.debug("Status",o,"satisfied."),a.resolve(!0)},function(){n.debug("Status",o,"not satisfied."),a.reject(o)})},function(t){l[e]?(n.debug("Failed to reach status",e," because its dependencies are not satisfied. Last rejected dep: ",t),a.reject(t)):a.reject(e)})}),i=s=a}),r.reject()}else i=t.defer(),u(o)().then(function(){n.debug("Termination status",o,"satisfied."),i.resolve(!0)},function(){n.debug("Termination status",o,"not satisfied."),i.reject(o)});return i.promise},m=function(e){if(e)r=e;else{if(!r)throw"You must specify an initial status to achieve. ";e=r}return d(e).then(function(){s=e},function(e){s=e})},p=function(e){return s="pendingCheck",m(e)},g={invalidateStatus:p,cancelValidation:function(){s="",a.$broadcast("risevision.uiStatus.validationCancelled"),n.debug("UI status validation cancelled.")},getStatus:function(){return s},isStatusUndetermined:function(){return"pendingCheck"===s},generateDummyStatus:c};return g}])}(angular),function(e){"use strict";e.module("risevision.common.account",["risevision.common.gapi","risevision.core.oauth2","risevision.common.company","risevision.core.cache"]).factory("agreeToTerms",["$q","riseAPILoader","$log","userInfoCache",function(e,n,t,o){return function(){t.debug("agreeToTerms called.");var i=e.defer();return n().then(function(e){var n=e.account.agreeToTerms();n.execute(function(e){t.debug("agreeToTerms resp",e),o.removeAll(),e.error?i.reject(e.error):i.resolve()})}),i.promise}}]).factory("registerAccount",["$q","$log","createCompany","addAccount","updateUser","agreeToTerms",function(e,n,t,o,i,a){return function(t,s){n.debug("registerAccount called.",t,s);var r=e.defer();return o().then().finally(function(){a().then().finally(function(){i(t,s).then(function(e){e.result?r.resolve():r.reject()},r.reject).finally("registerAccount ended")})}),r.promise}}]).factory("addAccount",["$q","riseAPILoader","$log",function(e,n,t){return function(){t.debug("addAccount called.");var o=e.defer();return n().then(function(e){var n=e.account.add();n.execute(function(e){t.debug("addAccount resp",e),e.result?o.resolve():o.reject("addAccount")})}),o.promise}}])}(angular),function(e){"use strict";e.module("risevision.common.registration",["risevision.common.userstate","risevision.ui-flow","risevision.core.userprofile","risevision.common.gapi"]).config(["uiStatusDependencies",function(e){e.addDependencies({registerdAsRiseVisionUser:"signedInWithGoogle",registrationComplete:["notLoggedIn","registerdAsRiseVisionUser"]})}]).factory("signedInWithGoogle",["$q","getOAuthUserInfo","userState",function(e,n,t){return function(){var n=e.defer();return t.isLoggedIn()?n.resolve():n.reject("signedInWithGoogle"),n.promise}}]).factory("notLoggedIn",["$q","$log","signedInWithGoogle",function(e,n,t){return function(){var n=e.defer();return t().then(function(){n.reject("notLoggedIn")},n.resolve),n.promise}}]).factory("registerdAsRiseVisionUser",["$q","getUserProfile","cookieStore","$log","userState",function(n,t,o,i,a){return function(){var s=n.defer();return t(a.getUsername()).then(function(n){e.isDefined(n.email)&&e.isDefined(n.mailSyncEnabled)?s.resolve(n):o.get("surpressRegistration")?s.resolve({}):s.reject("registerdAsRiseVisionUser")},function(e){o.get("surpressRegistration")?s.resolve({}):(i.debug("registerdAsRiseVisionUser rejected",e),s.reject("registerdAsRiseVisionUser"))}),s.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.cache",[]).value("rvStorage",sessionStorage).factory("userInfoCache",["$cacheFactory",function(e){return e("user-info-cache")}])}(angular),function(e){"use strict";e.module("risevision.core.util",[]).factory("pick",function(){var n=Array.prototype,t=n.slice,o=n.concat,i=function(e,n,t){if(void 0===n)return e;switch(null===t?3:t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,o){return e.call(n,t,o)};case 3:return function(t,o,i){return e.call(n,t,o,i)};case 4:return function(t,o,i,a){return e.call(n,t,o,i,a)}}return function(){return e.apply(n,arguments)}};return function(n,a,s){var r,l={};if(null===n)return l;if(e.isFunction(a)){a=i(a,s);for(r in n){var c=n[r];a(c,r,n)&&(l[r]=c)}}else{var u=o.apply([],t.call(arguments,1));n=new Object(n);for(var d=0,m=u.length;m>d;d++)r=u[d],r in n&&(l[r]=n[r])}return l}})}(angular),function(e){"use strict";e.module("risevision.core.userprofile",["risevision.common.gapi","risevision.core.oauth2","risevision.core.cache"]).value("userRoleMap",{ce:"Content Editor",cp:"Content Publisher",da:"Display Administrator",ua:"System Administrator",pu:"Store Purchaser",sa:"Rise System Administrator",ba:"Rise Store Administrator"}).factory("getUserProfile",["oauth2APILoader","coreAPILoader","$q","$log","getOAuthUserInfo","userInfoCache",function(e,n,t,o,i,a){return function(i,s){var r=t.defer();if(i){s&&a.remove("profile-"+i);var l={};i&&(l.username=i),o.debug("getUserProfile called",l),a.get("profile-"+i)?(o.debug("getUserProfile resp from cache","profile-"+i,a.get("profile-"+i)),r.resolve(a.get("profile-"+i))):t.all([e(),n()]).then(function(e){var n=e[1];n.user.get(l).execute(function(e){e.error||!e.result?r.reject(e):(o.debug("getUser resp",e),a.put("profile-"+i,e.item),r.resolve(e.item))})},r.reject)}else r.reject("getUserProfile failed: username param is required."),o.debug("getUserProfile failed: username param is required.");return r.promise}}]).factory("updateUser",["$q","coreAPILoader","$log","userInfoCache","getUserProfile","pick",function(e,n,t,o,i,a){return function(s,r){var l=e.defer();return r=a(r,"mailSyncEnabled","email","firstName","lastName","telephone","roles","status"),t.debug("updateUser called",s,r),n().then(function(e){var n=e.user.update({username:s,data:JSON.stringify(r)});n.execute(function(e){t.debug("updateUser resp",e),e.error?l.reject(e):e.result?(o.remove("profile-"+s),i(s).then(function(){l.resolve(e)})):l.reject("updateUser")})},l.reject),l.promise}}]).factory("addUser",["$q","coreAPILoader","$log","pick",function(e,n,t,o){return function(i,a,s){var r=e.defer();return n().then(function(e){s=o(s,"firstName","lastName","email","telephone","roles","status");var n=e.user.add({username:a,companyId:i,data:JSON.stringify(s)});n.execute(function(e){t.debug("addUser resp",e),e.result?r.resolve(e):r.reject(e)})}),r.promise}}]).factory("deleteUser",["$q","coreAPILoader","$log",function(e,n,t){return function(o){var i=e.defer();return n().then(function(e){var n=e.user.delete({username:o});n.execute(function(e){t.debug("deleteUser resp",e),e.result?i.resolve(e):i.reject("deleteUser")})}),i.promise}}]).factory("getUsers",["$q","coreAPILoader","$log",function(e,n,t){return function(o){t.debug("getUsers",o);var i=e.defer();return n().then(function(e){var n=e.user.list(o);n.execute(function(e){t.debug("getUsers resp",e),e.result?i.resolve(e.items):i.reject("getUsers")})},i.reject),i.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.company",["risevision.common.gapi","risevision.core.cache","risevision.core.util"]).constant("COMPANY_WRITABLE_FIELDS",["name","street","unit","city","province","country","postalCode","timeZoneOffset","telephone","fax","companyStatus","notificationEmails","mailSyncEnabled","sellerId"]).factory("createCompany",["$q","coreAPILoader","COMPANY_WRITABLE_FIELDS","pick",function(e,n,t,o){return function(i,a){var s=e.defer();return n().then(function(e){var n=o.apply(this,[a].concat(t)),r=e.company.add({parentId:i,data:JSON.stringify(n)});r.execute(function(e){e.result?s.resolve(e.item):s.reject(e)},s.reject)}),s.promise}}]).factory("getCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o){t.debug("getCompany called",o);var i=n.defer();return e().then(function(e){var n={};o&&(n.id=o);var a=e.company.get(n);a.execute(function(e){t.debug("getCompany resp",e),e.result?i.resolve(e.item):i.reject(e)})}),i.promise}}]).factory("lookupCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o){t.debug("lookupCompany called",o);var i=n.defer();return e().then(function(e){var n=e.company.lookup({authKey:o});n.execute(function(e){t.debug("lookupCompany resp",e),e.result?i.resolve(e.item):i.reject(e)})}),i.promise}}]).factory("moveCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o,i){var a=n.defer();return e().then(function(e){var n=e.company.move({authKey:o,newParentId:i});n.execute(function(e){t.debug("moveCompany resp",e),e.result?a.resolve(e.item):a.reject(e)})}),a.promise}}]).factory("updateCompany",["$q","$log","coreAPILoader","pick","COMPANY_WRITABLE_FIELDS",function(e,n,t,o,i){return function(a,s){var r=e.defer();return s=o.apply(this,[s].concat(i)),n.debug("updateCompany called",a,s),t().then(function(e){var t=e.company.update({id:a,data:JSON.stringify(s)});t.execute(function(e){n.debug("updateCompany resp",e),e.result?r.resolve(e):r.reject(e)})}),r.promise}}]).factory("regenerateCompanyField",["$q","$log","coreAPILoader",function(e,n,t){return function(o,i){var a=e.defer();return n.debug("regenerateField called",o,i),t().then(function(e){var t=e.company.regenerateField({id:o,fieldName:i});t.execute(function(e){n.debug("regenerateField resp",e),e.error?a.reject(e.message):a.resolve(e)},function(e){a.reject("call failed "+e)})}),a.promise}}]).factory("deleteCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o){t.debug("deleteCompany called",o);var i=n.defer();return e().then(function(e){var n={};o&&(n.id=o);var a=e.company.delete(n);a.execute(function(e){t.debug("deleteCompany resp",e),e.result?i.resolve(e.item):i.reject(e)})}),i.promise}}]).service("companyService",["coreAPILoader","$q","$log","getCompany",function(e,n,t,o){this.getCompanies=function(o,i,a,s,r){var l=n.defer(),c={companyId:o,search:i,cursor:a,count:s,sort:r};return t.debug("getCompanies called with",c),e().then(function(e){var n=e.company.list(c);n.execute(function(e){t.debug("getCompanies resp",e),l.resolve(e)})}),l.promise},this.loadSelectedCompany=function(e,t){var i=n.defer();return e&&e!==t.id?o(e).then(function(e){i.resolve(0===e.code&&e.item?e.item:t)}):i.resolve(t),i.promise},this.validateAddressSimple=function(e,n){var t=[];if(n)if(n.firstName||t.push("Missing First Name"),n.lastName||t.push("Missing Last Name"),n.email){var o=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;o.test(n.email)||t.push("Invalid Email")}else t.push("Missing Email");return e.street||t.push("Missing Address (Line 1)"),e.city||t.push("Missing City"),e.country||t.push("Missing Country"),e.province||t.push("Missing State / Province"),e.postalCode||t.push("Missing Zip / Postal Code"),t}}]).filter("fullAddress",function(){return function(e){var n=(e.street?e.street+", ":"")+(e.city?e.city+", ":"")+(e.province?e.province+", ":"")+(e.country?e.country+", ":"")+(e.postalCode?e.postalCode+", ":"");return n&&(n=n.substr(0,n.length-2)),n}})}(angular),function(e){"use strict";e.module("risevision.core.oauth2",["risevision.common.gapi","risevision.core.cache"]).factory("getOAuthUserInfo",["oauth2APILoader","$q","userInfoCache","$log",function(e,n,t,o){return function(){var i,a=n.defer();return(i=t.get("oauth2UserInfo"))?i.error?a.reject(i.error):a.resolve(i):e().then(function(e){e.userinfo.get().execute(function(e){o.debug("getOAuthUserInfo oauth2.userinfo.get() resp",e),e?e.hasOwnProperty("error")?(t.remove("oauth2UserInfo"),a.reject(e.error)):(t.put("oauth2UserInfo",e),a.resolve(e)):(t.remove("oauth2UserInfo"),a.reject())})},a.reject),a.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.systemmessages",["risevision.common.gapi"]).factory("getCoreSystemMessages",["gapiLoader","$q","$log",function(e,n,t){return function(o){var i=n.defer();return e().then(function(e){var n=e.client.core.systemmessage.list({companyId:o});n.execute(function(e){var n=e;n instanceof Array||!n.items||(n=n.items),t.debug("getCoreSystemMessage resp",n),i.resolve(n)})}),i.promise}}])}(angular),function(e){"use strict";e.module("risevision.common.company",["risevision.core.company","risevision.common.userstate"]).service("selectedCompanyUrlHandler",["$location","userState","getCompany","$rootScope","$log",function(e,n,t,o,i){var a=this;
e.search().cid&&!n.isLoggedIn()&&(i.debug("cid",e.search().cid,"saved for later processing."),this.pendingSelectedCompany=e.search().cid),o.$on("risevision.user.userSignedIn",function(){a.pendingSelectedCompany&&(e.search("cid",a.pendingSelectedCompany),delete a.pendingSelectedCompany,a.updateSelectedCompanyFromUrl())}),this.init=function(){!e.search().cid&&n.getSelectedCompanyId()&&n.getSelectedCompanyId()!==n.getUserCompanyId()?e.search("cid",n.getSelectedCompanyId()):e.search().cid&&n.getSelectedCompanyId()!==n.getUserCompanyId()&&e.search("cid",null),a.updateSelectedCompanyFromUrl()},this.updateUrl=function(){var t=n.getSelectedCompanyId();t?t!==n.getUserCompanyId()&&e.search().cid!==t&&e.search("cid",t):e.search().cid&&e.search({cid:null})},this.updateSelectedCompanyFromUrl=function(){var o=e.search().cid;n.getSelectedCompanyId()&&o&&o!==n.getSelectedCompanyId()&&t(o).then(function(e){n.switchCompany(e)})}}])}(angular),function(e){"use strict";e.module("risevision.common.shoppingcart",["risevision.common.userstate"]).factory("shoppingCart",["rvStorage","$log","$q","userState",function(n,t,o,i){var a=[],s={},r=function(){var e=n.getItem("rvStore_OrderProducts");if(t.debug("read storedCartContents",e),e){var o=JSON.parse(e);if(o&&o.items&&o.itemsMap){for(;a.length>0;)a.pop();for(var i=0;i<o.items.length;i++)a.push(o.items[i]);s=o.itemsMap,t.debug(a.length,"items pushed to cart.")}}},l=function(){n.setItem("rvStore_OrderProducts",JSON.stringify({items:a,itemsMap:s}));var e=n.getItem("rvStore_OrderProducts");t.debug("written storedCartContents",e)},c=o.defer(),u={loadReady:c.promise,getSubTotal:function(e){var n=0,t=0;if(a)for(var o=0;o<a.length;o++){var i=e?a[o].selected.shippingCAD:a[o].selected.shippingUSD,s=e?a[o].selected.priceCAD:a[o].selected.priceUSD;"Metered"!==a[o].paymentTerms&&(n+=i*a[o].qty||0,t+=s*a[o].qty||0)}return t+n},getShippingTotal:function(e){var n=0;if(a)for(var t=0;t<a.length;t++)if("Metered"!==a[t].paymentTerms){var o=e?a[t].selected.shippingCAD:a[t].selected.shippingUSD;n+=o*a[t].qty||0}return n},clear:function(){for(;a.length>0;)a.pop();for(var e in s)delete s[e];l(),t.debug("Shopping cart cleared.")},destroy:function(){return this.clear(),l(),a},getItems:function(){return a},setItems:function(e){for(t.debug("Setting cart items",e);a.length>0;)a.pop();for(var n=0;n<e.length;n++)a.push(e[n]);l()},initialize:function(){return r(),c.resolve(),a},getItemCount:function(){return null!==a?a.length:0},removeItem:function(e){if(e&&s[e.productId]){delete s[e.productId];for(var n=0;n<a.length;n++)if(a[n].productId===e.productId){a.splice(n,1),delete s[e.productId];break}l()}},adjustItemQuantity:function(e,n){e&&$.isNumeric(n)&&s[e.id]&&(n>0?(s[e.id].quantity=n,s[e.id].item.qty=n,l()):this.removeItem(e))},addItem:function(n,t,o){i.isRiseVisionUser()&&(!s[n.productId]||"Subscription"!==n.paymentTerms&&"Metered"!==n.paymentTerms)&&n&&$.isNumeric(t)&&n.orderedPricing.length>o&&(s[n.productId]?s[n.productId].qty=parseInt(s[n.productId].qty)+parseInt(t):(s[n.productId]=e.copy(n),s[n.productId].qty=t,a.push(s[n.productId])),s[n.productId].selected=n.orderedPricing[o],l())},itemExists:function(e){return i.isRiseVisionUser()&&e&&s[e.productId]?!0:!1}};return u.initialize(),u}])}(angular),function(e){"use strict";e.module("risevision.common.systemmessages",[]).factory("systemMessages",[function(){function n(e,n){n.push(e)}var t=[];return t.addMessages=function(o){o&&o instanceof Array&&(o=function(n){var t=[];return e.forEach(n,function(e){var n=new Date(e.endDate||"2199-12-31"),o=new Date(e.startDate||0),i=new Date;i>o&&n>i&&t.push(e)}),t}(o),o.forEach(function(e){var o=!1;t.forEach(function(n){n.text===e.text&&(o=!0)}),o||n(e,t)}))},t.clear=function(){t.length=0},t}])}(angular),function(e){"use strict";try{e.module("risevision.common.config")}catch(n){e.module("risevision.common.config",[])}e.module("risevision.common.config").value("CORE_URL","https://rvaserver2.appspot.com/_ah/api").value("STORE_URL","https://store.risevision.com")}(angular);try{angular.module("risevision.common.config")}catch(err){angular.module("risevision.common.config",[])}angular.module("risevision.common.config").value("CLIENT_ID","614513768474.apps.googleusercontent.com");var gapiLoadingStatus=null,handleClientJSLoad=function(){gapiLoadingStatus="loaded",console.debug("ClientJS is loaded.");var e=document.createEvent("Events");e.initEvent("gapi.loaded",!0,!0),window.dispatchEvent(e)};angular.module("risevision.common.gapi",[]).factory("gapiLoader",["$q","$window",function(e,n){var t=e.defer();return function(){var e;if("loaded"===n.gapiLoadingStatus)t.resolve(n.gapi);else if(!n.gapiLoadingStatus){n.gapiLoadingStatus="loading";var o=n.gapiSrc||"//apis.google.com/js/client.js?onload=handleClientJSLoad",i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",o),"undefined"!=typeof i&&document.getElementsByTagName("body")[0].appendChild(i),e=function(){t.resolve(n.gapi),n.removeEventListener("gapi.loaded",e,!1)},n.addEventListener("gapi.loaded",e,!1)}return t.promise}}]).factory("gapiClientLoaderGenerator",["$q","gapiLoader","$log",function(e,n,t){return function(o,i,a){return function(){var s=e.defer();return n().then(function(e){e.client[o]?s.resolve(e.client[o]):e.client.load.apply(this,[o,i].concat([function(){if(e.client[o])t.debug(o+"."+i+" Loaded"),s.resolve(e.client[o]);else{var n=o+"."+i+" Load Failed";t.error(n),s.reject(n)}},a]))}),s.promise}}}]).factory("oauth2APILoader",["gapiClientLoaderGenerator",function(e){return e("oauth2","v2")}]).factory("coreAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("core","v0",o)}]).factory("riseAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("rise","v0",o)}]),function(e){"use strict";e.module("risevision.common.localstorage",["ngStorage"]).factory("localStorageService",["$localStorage","$sessionStorage",function(e,n){var t=localStorage?localStorage:sessionStorage,o=localStorage?e:n,i={};return i.getStorage=function(){return o},i.setItemImmediate=function(e,n){t.setItem(e,n)},i.removeItemImmediate=function(e){t.removeItem(e)},i.getItem=function(e){return t.getItem(e)},i}])}(angular),function(e){"use strict";e.module("risevision.common.systemmessages",[]).factory("systemMessages",[function(){function n(e,n){n.push(e)}var t=[];return t.addMessages=function(o){o&&o instanceof Array&&(o=function(n){var t=[];return e.forEach(n,function(e){var n=new Date(e.endDate||"2199-12-31"),o=new Date(e.startDate||0),i=new Date;i>o&&n>i&&t.push(e)}),t}(o),o.forEach(function(e){var o=!1;t.forEach(function(n){n.text===e.text&&(o=!0)}),o||n(e,t)}))},t.clear=function(){t.length=0},t}])}(angular),angular.module("risevision.store.data-gadgets",[]).service("gadgetsService",["$q",function(e){this.closeIFrame=function(){var n=e.defer();return gadgets.rpc.call("","rscmd_closeSettings",function(){n.resolve(!0)}),n.promise},this.sendProductCode=function(n){var t=e.defer(),o={params:n};return gadgets.rpc.call("","rscmd_saveSettings",function(){t.resolve(!0)},o),t.promise}}]);